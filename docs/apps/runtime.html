<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="/trunk/static/css/site.css" rel="stylesheet" type="text/css">
    <link href="/trunk/static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="/trunk/static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href="//www.google.com/images/icons/product/chrome-16.png" rel="icon" type="image/ico">
    <link href="/trunk/static/css/api.css" rel="stylesheet" type="text/css">
    <title>chrome.runtime - Google Chrome 扩展程序/应用开发者文档（非官方中文版）</title>
  </head>
  <body>
    <a id="top"></a>
    <div id="header">
      <span id="logo">
        <a href="http://code.google.com/" id="view-original"><img src="/trunk/static/images/chrome_logo.gif" alt="单击此处查看英文原文"></a>
        <script type="text/javascript">
          document.getElementById('view-original').href = "https://developer.chrome.com" + location.pathname;
        </script>
      </span>
      <span id="cse">
        <gcse:searchbox-only enableAutoComplete="true" autoCompleteMatchTyple="prefix"></gcse:searchbox-only>
      </span>
    </div>
    <a id="gc-topnav-anchor"></a>
    <div id="gc-topnav">
      <h1>Google Chrome 应用（非官方中文版）</h1>
      <ul id="home" class="gc-topnav-tabs">
        <li id="home_link">
          <!--@<a href="index.html" title="Google Chrome 应用 home page"><div>Home</div></a>-->
          <a href="index.html" title="Google Chrome 应用主页"><div>主页</div></a>
        </li>
        <li id="docs_link">
          <!--@<a href="docs.html" title="Official Google Chrome 应用 documentation"><div>Docs</div></a>-->
          <a href="docs.html" title="Google Chrome 应用文档"><div>文档</div></a>
        </li>
        <li id="faq_link">
          <!--@<a href="faq.html" title="Answers to frequently asked questions about Google Chrome 应用"><div>FAQ</div></a>-->
          <a href="faq.html" title="关于 Google Chrome 应用常见问题的答案"><div>常见问题</div></a>
        </li>
        <li id="samples_link">
          <!--@<a href="samples.html" title="Sample 应用 (with source code)"><div>Samples</div></a>-->
          <a href="samples.html" title="示例应用（包含源代码）"><div>示例</div></a>
        </li>
        <li id="group_link">
          <!--<a href="http://groups.google.com/a/chromium.org/group/chromium-extensions" title="Google Chrome 应用 developer forum"><div>Group</div></a>-->
          <a href="http://groups.google.com/a/chromium.org/group/chromium-extensions" title="Google Chrome 应用开发人员论坛"><div>论坛（英文）</div></a>
        </li>
        <li id="so_link">
          <!--<a href="http://stackoverflow.com/questions/tagged/google-chrome-extension" title="[google-chrome-extension] tag on Stack Overflow"><div>Questions?</div></a>-->
          <a href="http://stackoverflow.com/questions/tagged/google-chrome-extension" title="Stack Overflow 上的 [google-chrome-extension] 标签"><div>问题？（英文）</div></a>
        </li>
      </ul>
    </div>
    <div id="gc-container">
      <div id="gc-sidebar">
        <ul 
            class="level1 ">
          <li class="level2">
                <span class="level2">入门</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="about_apps.html" class="level3 ">什么是打包应用？</a>
                </li>
                <li class="level3">
                      <a href="app_architecture.html" class="level3 ">理解架构</a>
                </li>
                <li class="level3">
                      <a href="first_app.html" class="level3 ">创建您的第一个应用</a>
                </li>
              </ul>
          </li>
          <li class="level2">
                <span class="level2">开发</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="develop_apps.html" class="level3 ">在您开始之前</a>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">基础知识</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="app_lifecycle.html" class="level4 ">Manage App Lifecycle</a>
                      </li>
                      <li class="level4">
                            <a href="app_storage.html" class="level4 ">Manage Data</a>
                      </li>
                      <li class="level4">
                            <a href="offline_apps.html" class="level4 ">首先考虑离线</a>
                      </li>
                      <li class="level4">
                            <a href="app_external.html" class="level4 ">嵌入内容</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">安全和隐私权</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="app_identity.html" class="level4 ">Identify User</a>
                      </li>
                      <li class="level4">
                            <a href="app_csp.html" class="level4 ">Comply with CSP</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">通知</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                          <a class="button level4">
                            <span class="level4">云消息服务</span>
                            <div class="toggleIndicator level4"></div>
                          </a>
                          <ul toggleable
                              class="level4 hidden">
                            <li class="level5">
                                  <a href="cloudMessaging.html" class="level5 ">关于云消息服务</a>
                            </li>
                            <li class="level5">
                                  <a href="pushMessaging.html" class="level5 ">客户端参考</a>
                            </li>
                            <li class="level5">
                                  <a href="gcm_server.html" class="level5 ">服务参考</a>
                            </li>
                            <li class="level5">
                                  <a href="gcm_tos.html" class="level5 ">服务条款</a>
                            </li>
                          </ul>
                      </li>
                      <li class="level4">
                            <a href="notifications.html" class="level4 ">桌面通知</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">高级技术</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="app_network.html" class="level4 ">Network Communications</a>
                      </li>
                      <li class="level4">
                            <a href="app_hardware.html" class="level4 ">Access Hardware Devices</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">MVC 架构</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="app_frameworks.html" class="level4 ">关于 MVC 架构</a>
                      </li>
                      <li class="level4">
                            <a href="angular_framework.html" class="level4 ">用 AngularJS 建立应用</a>
                      </li>
                      <li class="level4">
                            <a href="sencha_framework.html" class="level4 ">Build Apps with Sencha Ext JS</a>
                      </li>
                    </ul>
                </li>
              </ul>
          </li>
          <li class="level2">
                <span class="level2">部署</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="publish_app.html" class="level3 ">发布</a>
                </li>
              </ul>
          </li>
          <li class="level2">
                <span class="level2">参考</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="manifest.html" class="level3 ">清单文件</a>
                </li>
                <li class="level3">
                      <a href="api_index.html" class="level3 ">Chrome 浏览器的 JavaScript API</a>
                </li>
                <li class="level3">
                      <a href="api_other.html" class="level3 ">支持的库</a>
                </li>
                <li class="level3">
                      <a href="app_deprecated.html" class="level3 ">禁用的网页特性</a>
                </li>
              </ul>
          </li>
          <li class="level2">
                <a href="samples.html" class="level2 ">示例</a>
          </li>
          <li class="level2">
                <a href="app_known_issues.html" class="level2 ">Known Issues</a>
          </li>
        </ul>
      </div>
      <div id="gc-pagecontent">
        <h1 class="page_title">chrome.runtime</h1>
        
        
        
        <div id="toc">
          <h2><!--@Contents-->目录</h2>
          <ol>
            <li>
              <a href="#apiReference"><!--@API reference: -->API 参考：chrome.runtime</a>
              <ol>
                  <li><a href="#types"><!--@Types-->类型</a><ol>  <li>    <a href="#type-Port">Port</a>  </li>  <li>    <a href="#type-MessageSender">MessageSender</a>  </li></ol></li>
                  <li><a href="#properties"><!--@Properties-->属性</a><ol>  <li>    <a href="#property-lastError">lastError</a><ol><li>      <a href="#lastError-properties"><!--@Properties-->属性</a>      <ol>        <li>          <a href="#property-lastError-message">message</a>        </li>      </ol>    </li></ol>  </li>  <li>    <a href="#property-id">id</a>  </li></ol></li>
                  <li><a href="#methods"><!--@Methods-->方法</a><ol>  <li><a href="#method-getBackgroundPage">getBackgroundPage</a></li>  <li><a href="#method-getManifest">getManifest</a></li>  <li><a href="#method-getURL">getURL</a></li>  <li><a href="#method-reload">reload</a></li>  <li><a href="#method-requestUpdateCheck">requestUpdateCheck</a></li>  <li><a href="#method-connect">connect</a></li>  <li><a href="#method-sendMessage">sendMessage</a></li></ol></li>
                  <li><a href="#events"><!--@Events-->事件</a><ol>  <li><a href="#event-onStartup">onStartup</a></li>  <li><a href="#event-onInstalled">onInstalled</a></li>  <li><a href="#event-onSuspend">onSuspend</a></li>  <li><a href="#event-onSuspendCanceled">onSuspendCanceled</a></li>  <li><a href="#event-onUpdateAvailable">onUpdateAvailable</a></li>  <li><a href="#event-onConnect">onConnect</a></li>  <li><a href="#event-onConnectExternal">onConnectExternal</a></li>  <li><a href="#event-onMessage">onMessage</a></li>  <li><a href="#event-onMessageExternal">onMessageExternal</a></li></ol></li>
                  <li><a href="#samples"><!--@Sample -->示例应用</a></li>
              </ol>
            </li>
          </ol>
        </div>

<table class="intro">
  <tr>
    <th scope="col"></th>
    <th scope="col"></th>
  </tr>
  <tr>
    <td><strong><!--@Description:-->描述：</strong></td>
    <td><!--@Use the-->使用 <code>chrome.runtime</code> <!--@module
    to retrieve the background page, return details about the manifest,
    and listen for and respond to events in the app or extension lifecycle.
    You can also use this API to convert the relative path
    of URLs to fully-qualified URLs.-->
    模块获取后台页面、返回清单文件的详情、监听并响应应用或扩展程序生命周期内的事件，您还可以使用该 API 将相对路径的 URL 转换为完全限定的 URL。
    </td>
  </tr>
  <tr>
    <td><strong><!--@Availability:-->可用版本：</strong></td>
    <td>Google Chrome 22</td>
  </tr>
  <tr>
    <td><strong><!--@Permissions:-->权限：</strong></td>
    <td><!--@None-->无</td>
  </tr>
  <tr>
    <td><strong><!--@Learn more:-->了解更多：</strong></td>
    <td><a href="app_lifecycle.html"><!--@Manage App Lifecycle-->管理应用生命周期</a><br>
    <a href="event_pages.html"><!--@Event Pages-->事件页面</a></td>
  </tr>
</table>
        <h2 id="apiReference"><!--@API Reference: chrome.runtime-->API 参考：chrome.runtime</h2>
        <div class="api_reference">
            <h3 id="types"><!--@Types-->类型</h3>
              <div>
                <h3 id="type-Port">Port</h3>
                <div>
                  <dt><span class="type_name">  (    object  )</span></dt>
              <dd>
                    允许与其他页面双向通信的对象。
                  </dd>    <h4 id="Port-properties">
                    <!--@Properties of --><a href="#type-Port">Port</a>
                    的属性
                  </h4>
                  <dd><dl>      <div>
                      <a name="property-Port-name"></a>
                      <dt>
                        <span class="variable">name</span>
                        <span class="property">
                          (
                            
                            string
                          )
                        </span>
                      </dt>
                    </div>
                    <div>
                      <a name="property-Port-disconnect"></a>
                      <dt>
                        <span class="variable">disconnect</span>
                        <span class="property">
                          (
                            
                            function
                          )
                        </span>
                      </dt>
                    </div>
                    <div>
                      <a name="property-Port-onDisconnect"></a>
                      <dt>
                        <span class="variable">onDisconnect</span>
                        <span class="property">
                          (
                            
                            <a href="events.html#type-Event">events.Event</a>
                          )
                        </span>
                      </dt>
                    </div>
                    <div>
                      <a name="property-Port-onMessage"></a>
                      <dt>
                        <span class="variable">onMessage</span>
                        <span class="property">
                          (
                            
                            <a href="events.html#type-Event">events.Event</a>
                          )
                        </span>
                      </dt>
                    </div>
                    <div>
                      <a name="property-Port-postMessage"></a>
                      <dt>
                        <span class="variable">postMessage</span>
                        <span class="property">
                          (
                            
                            function
                          )
                        </span>
                      </dt>
                    </div>
                    <div>
                      <a name="property-Port-sender"></a>
                      <dt>
                        <span class="variable">sender</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            <a href="runtime.html#type-MessageSender">MessageSender</a>
                          )
                        </span>
                      </dt>
                      <dd>
                        <b>只有</b>当端口传递给 onConnect/onConnectExternal 监听器时才会存在该属性。
                      </dd>
                    </div>
              </dl></dd>
                </div>
              </div>
              <div>
                <h3 id="type-MessageSender">MessageSender</h3>
                <div>
                  <dt><span class="type_name">  (    object  )</span></dt>
              <dd>
                    包含有关发送消息或请求的脚本上下文信息的对象。
                  </dd>    <h4 id="MessageSender-properties">
                    <!--@Properties of --><a href="#type-MessageSender">MessageSender</a>
                    的属性
                  </h4>
                  <dd><dl>      <div>
                      <a name="property-MessageSender-tab"></a>
                      <dt>
                        <span class="variable">tab</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            <a href="tabs.html#type-Tab">tabs.Tab</a>
                          )
                        </span>
                      </dt>
                      <dd>
                        <b>只有</b>当连接从标签页或内容脚本中打开时才会存在这一属性。
                      </dd>
                    </div>
                    <div>
                      <a name="property-MessageSender-id"></a>
                      <dt>
                        <span class="variable">id</span>
                        <span class="property">
                          (
                            
                            string
                          )
                        </span>
                      </dt>
                      <dd>
                        打开连接的扩展程序/应用的标识符。
                      </dd>
                    </div>
              </dl></dd>
                </div>
              </div>
            <h3 id="properties"><!--@Properties-->属性</h3>
              <div>
                <h3 id="property-lastError">lastError</h3>
                <div class="summary">
                  <span><span class="subdued">chrome.runtime.</span>lastError</span>
                </div>
                <div>
                  <dt><span class="property">lastError</span> <span class="type_name">  (  <span class="optional">optional</span>  object  )</span></dt>
              <dd>
                    如果发生错误，在 API 方法的回调函数执行的过程中将会定义该属性。
                  </dd>    <h4 id="lastError-properties">
                    <!--@Properties of --><a href="#property-lastError">lastError</a>
                    的属性
                  </h4>
                  <dd><dl>      <div>
                      <a name="property-lastError-message"></a>
                      <dt>
                        <span class="variable">message</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            string
                          )
                        </span>
                      </dt>
                      <dd>
                        有关发生错误的详情。
                      </dd>
                    </div>
              </dl></dd>
                </div>
              </div>
              <div>
                <h3 id="property-id">id</h3>
                <div class="summary">
                  <span><span class="subdued">chrome.runtime.</span>id</span>
                </div>
                <div>
                  <dt><span class="property">id</span> <span class="type_name">  (    string  )</span></dt>
              <dd>
                    扩展程序/应用的标识符。
                  </dd>  </div>
              </div>
            <h3 id="methods"><!--@Methods-->方法</h3>
              <div>
                <h4 id="method-getBackgroundPage">getBackgroundPage</h4>
                <div class="summary lower">
                  <span><span class="subdued">chrome.runtime.</span>getBackgroundPage</span>(<span>function <span class="variable">callback</span></span>)
                </div>
                <div class="description">
                  <p>
                    获取当前扩展程序/应用中正在运行的后台网页的 JavaScript window 对象。如果后台网页是事件页面，系统会确保在调用回调函数前它已经载入。如果没有后台网页，将会设置错误信息。
                  </p>
                  <h4><!--@Parameters-->参数</h4>
                  <dl>
                      <div>
                        <a name="property-getBackgroundPage-callback"></a>
                        <dt>
                          <span class="variable">callback</span>
                          <span class="property">
                            (
                              
                              function
                            )
                          </span>
                        </dt>
                      </div>
                  </dl>
                    <h4><!--@Callback-->回调函数</h4>
                    <p>
                          <!--@The <em>callback</em> parameter should specify a function
                          that looks like this:-->
                          <em>callback</em> 参数应该指定一个如下形式的函数：
                    </p>
                    <pre>function(global backgroundPage) <span class="subdued">{...}</span>;</pre>
                    <dl>
                        <div>
                          <a name="property-callback-backgroundPage"></a>
                          <dt>
                            <span class="variable">backgroundPage</span>
                            <span class="property">
                              (
                                <span class="optional">optional</span>
                                global
                              )
                            </span>
                          </dt>
                          <dd>
                            后台页面的 JavaScript window 对象。
                          </dd>
                        </div>
                    </dl>
                </div>
              </div>
              <div>
                <h4 id="method-getManifest">getManifest</h4>
                <div class="summary">
                  <span>object <span class="subdued">chrome.runtime.</span>getManifest</span>()
                </div>
                <div class="description">
                  <p>
                    从清单文件中返回有关应用或扩展程序的详情，返回的对象是完整<a href="manifest.html">清单文件</a>序列化的结果。
                  </p>
                    <h4><!--@Returns-->返回值</h4>
                    <dl>
                      <dt><span class="property">
                        ( object )
                      </span></dt>
                      <dd>
                      清单文件详情。
                      </dd>
                    </dl>
                </div>
              </div>
              <div>
                <h4 id="method-getURL">getURL</h4>
                <div class="summary">
                  <span>string <span class="subdued">chrome.runtime.</span>getURL</span>(<span>string <span class="variable">path</span></span>)
                </div>
                <div class="description">
                  <p>
                    将应用或扩展程序安装目录内的相对路径转换为完全限定的 URL。
                  </p>
                  <h4><!--@Parameters-->参数</h4>
                  <dl>
                      <div>
                        <a name="property-getURL-path"></a>
                        <dt>
                          <span class="variable">path</span>
                          <span class="property">
                            (
                              
                              string
                            )
                          </span>
                        </dt>
                        <dd>
                          指向应用或扩展程序内资源的路径，相对于它的安装目录。
                        </dd>
                      </div>
                  </dl>
                    <h4><!--@Returns-->返回值</h4>
                    <dl>
                      <dt><span class="property">
                        ( string )
                      </span></dt>
                      <dd>
                      指向资源的完全限定 URL。
                      </dd>
                    </dl>
                </div>
              </div>
              <div>
                <h4 id="method-reload">reload</h4>
                <div class="summary lower">
                  <span><span class="subdued">chrome.runtime.</span>reload</span>()
                </div>
                <div class="description">
                  <p>
                    重新载入应用或扩展程序。
                  </p>
                </div>
              </div>
              <div>
                <h4 id="method-requestUpdateCheck">requestUpdateCheck</h4>
                <div class="summary lower">
                  <span><span class="subdued">chrome.runtime.</span>requestUpdateCheck</span>(<span>function <span class="variable">callback</span></span>)
                </div>
                <div class="description">
                  <p>
                    为当前应用/扩展程序请求检查更新。
                  </p>
                  <h4><!--@Parameters-->参数</h4>
                  <dl>
                      <div>
                        <a name="property-requestUpdateCheck-callback"></a>
                        <dt>
                          <span class="variable">callback</span>
                          <span class="property">
                            (
                              
                              function
                            )
                          </span>
                        </dt>
                      </div>
                  </dl>
                    <h4><!--@Callback-->回调函数</h4>
                    <p>
                          <!--@The <em>callback</em> parameter should specify a function
                          that looks like this:-->
                          <em>callback</em> 参数应该指定一个如下形式的函数：
                    </p>
                    <pre>function(enumerated string ["throttled", "no_update", "update_available"] status, object details) <span class="subdued">{...}</span>;</pre>
                    <dl>
                        <div>
                          <a name="property-callback-status"></a>
                          <dt>
                            <span class="variable">status</span>
                            <span class="property">
                              (
                                
                                enumerated string ["throttled", "no_update", "update_available"]
                              )
                            </span>
                          </dt>
                          <dd>
                            检查更新的结果。
                          </dd>
                        </div>
                        <div>
                          <a name="property-callback-details"></a>
                          <dt>
                            <span class="variable">details</span>
                            <span class="property">
                              (
                                <span class="optional">optional</span>
                                object
                              )
                            </span>
                          </dt>
                          <dd>
                            如果更新可用的话，包含有关可用更新的更多信息。
                          </dd>
                          <dd>
                            <dl>
                              <div>
                                <a name="property-details-version"></a>
                                <dt>
                                  <span class="variable">version</span>
                                  <span class="property">
                                    (
                                      
                                      string
                                    )
                                  </span>
                                </dt>
                                <dd>
                                  可用更新的版本。
                                </dd>
                              </div>
                            </dl>
                          </dd>
                        </div>
                    </dl>
                </div>
              </div>
              <div>
                <h4 id="method-connect">connect</h4>
                <div class="summary">
                  <span><a href="runtime.html#type-Port">Port</a> <span class="subdued">chrome.runtime.</span>connect</span>(<span class="optional">string <span class="variable">extensionId</span></span>, <span class="optional">object <span class="variable">connectInfo</span></span>)
                </div>
                <div class="description">
                  <p>
                    尝试连接到扩展程序/应用中其它的监听者（例如后台网页）或其他扩展程序/应用，该方法对于需要连接到它们的扩展程序进程的内容脚本非常有用。注意，该方法不能连接到内容脚本中的监听者，扩展程序可以通过 <a href="tabs.html#method-connect">tabs.connect</a> 连接到嵌入至标签页中的内容脚本。
                  </p>
                  <h4><!--@Parameters-->参数</h4>
                  <dl>
                      <div>
                        <a name="property-connect-extensionId"></a>
                        <dt>
                          <span class="variable">extensionId</span>
                          <span class="property">
                            (
                              <span class="optional">optional</span>
                              string
                            )
                          </span>
                        </dt>
                        <dd>
                          您需要连接到的扩展程序/应用的标识符，如果省略，默认为您自己的扩展程序。
                        </dd>
                      </div>
                      <div>
                        <a name="property-connect-connectInfo"></a>
                        <dt>
                          <span class="variable">connectInfo</span>
                          <span class="property">
                            (
                              <span class="optional">optional</span>
                              object
                            )
                          </span>
                        </dt>
                        <dd>
                          <dl>
                            <div>
                              <a name="property-connectInfo-name"></a>
                              <dt>
                                <span class="variable">name</span>
                                <span class="property">
                                  (
                                    <span class="optional">optional</span>
                                    string
                                  )
                                </span>
                              </dt>
                              <dd>
                                将传递给监听连接事件的扩展程序进程的 onConnect 事件。
                              </dd>
                            </div>
                          </dl>
                        </dd>
                      </div>
                  </dl>
                    <h4><!--@Returns-->返回值</h4>
                    <dl>
                      <dt><span class="property">
                        ( <a href="runtime.html#type-Port">Port</a> )
                      </span></dt>
                      <dd>
                      用来与扩展程序发送和接受消息的端口。如果扩展程序不存在则引发该端口的 <a href="runtime.html#property-Port-onDisconnect">Port.onDisconnect</a> 事件。
                      </dd>
                    </dl>
                </div>
              </div>
              <div>
                <h4 id="method-sendMessage">sendMessage</h4>
                <div class="summary lower">
                  <span><span class="subdued">chrome.runtime.</span>sendMessage</span>(<span class="optional">string <span class="variable">extensionId</span></span>, <span>any <span class="variable">message</span></span>, <span class="optional">function <span class="variable">responseCallback</span></span>)
                </div>
                <div class="description">
                  <p>
                    向扩展程序中的其它监听者（或另一个扩展程序/应用）发送单个请求。与 chrome.runtime.connect 类似，但是只发送具有可选回应的单个请求。<a href="runtime.html#event-onMessage">onMessage</a> 事件将在扩展程序的每一个页面中产生。注意，扩展程序不能使用该方法向内容脚本发送消息。要向内容脚本发送消息，请使用 <a href="tabs.html#method-sendMessage">tabs.sendMessage</a>。
                  </p>
                  <h4><!--@Parameters-->参数</h4>
                  <dl>
                      <div>
                        <a name="property-sendMessage-extensionId"></a>
                        <dt>
                          <span class="variable">extensionId</span>
                          <span class="property">
                            (
                              <span class="optional">optional</span>
                              string
                            )
                          </span>
                        </dt>
                        <dd>
                          您要连接的扩展程序标识符。如果省略，默认为您自己的扩展程序。
                        </dd>
                      </div>
                      <div>
                        <a name="property-sendMessage-message"></a>
                        <dt>
                          <span class="variable">message</span>
                          <span class="property">
                            (
                              
                              any
                            )
                          </span>
                        </dt>
                      </div>
                      <div>
                        <a name="property-sendMessage-responseCallback"></a>
                        <dt>
                          <span class="variable">responseCallback</span>
                          <span class="property">
                            (
                              <span class="optional">optional</span>
                              function
                            )
                          </span>
                        </dt>
                      </div>
                  </dl>
                    <h4><!--@Callback-->回调函数</h4>
                    <p>
                          <!--@If you specify the <em>responseCallback</em> parameter, it should
                          specify a function that looks like this:-->
                          如果您指定了 <em>responseCallback</em> 参数，它应该指定一个如下形式的函数：
                    </p>
                    <pre>function(any response) <span class="subdued">{...}</span>;</pre>
                    <dl>
                        <div>
                          <a name="property-responseCallback-response"></a>
                          <dt>
                            <span class="variable">response</span>
                            <span class="property">
                              (
                                
                                any
                              )
                            </span>
                          </dt>
                          <dd>
                            消息处理程序发送的 JSON 响应对象。如果连接到扩展程序的过程中发生错误，调用这一回调函数时将不传递参数，并将 <a href="runtime.html#property-lastError">lastError</a> 设为错误消息。
                          </dd>
                        </div>
                    </dl>
                </div>
              </div>
            <h3 id="events"><!--@Events-->事件</h3>
              <div>
                <h4 id="event-onStartup">onStartup</h4>
                <div class="summary">
                  <span class="subdued">chrome.runtime.</span>onStartup<span class="subdued">.addListener</span>(function()<span class="subdued"> {...}</span>);
                </div>
                <div class="description">
              <p>
                    当浏览器刚启动时产生。
                  </p>  </div>
              </div>
              <div>
                <h4 id="event-onInstalled">onInstalled</h4>
                <div class="summary">
                  <span class="subdued">chrome.runtime.</span>onInstalled<span class="subdued">.addListener</span>(function(<span>object <span class="variable">details</span></span>)<span class="subdued"> {...}</span>);
                </div>
                <div class="description">
              <p>
                    当扩展程序第一次安装、更新至新版本或 Chrome 浏览器更新至新版本时产生。
                  </p>      <h4><!--@Listener Parameters-->监听器参数</h4>
                    <dl>
                      <div>  <a name="property-onInstalled-details"></a>  <dt>    <span class="variable">details</span>    <span class="property">      (                object      )    </span>  </dt>  <dd>    <dl>      <div>        <a name="property-details-reason"></a>        <dt>          <span class="variable">reason</span>          <span class="property">            (                            enumerated string ["install", "update", "chrome_update"]            )          </span>        </dt>        <dd>          分发这一事件的原因。        </dd>      </div>      <div>        <a name="property-details-previousVersion"></a>        <dt>          <span class="variable">previousVersion</span>          <span class="property">            (              <span class="optional">optional</span>              string            )          </span>        </dt>        <dd>          表示已更新扩展程序的前一个版本，只有当 reason 为 'update' 时才存在。        </dd>      </div>    </dl>  </dd></div>
                    </dl>
                </div>
              </div>
              <div>
                <h4 id="event-onSuspend">onSuspend</h4>
                <div class="summary">
                  <span class="subdued">chrome.runtime.</span>onSuspend<span class="subdued">.addListener</span>(function()<span class="subdued"> {...}</span>);
                </div>
                <div class="description">
              <p>
                    在事件页面即将卸载前发送，这样扩展程序就有机会进行清理。注意，由于页面即将卸载，处理该事件时开始的任何异步操作都不能保证完成。如果卸载前事件页面产生了更多活动，将产生 onSuspendCanceled 事件，并且事件页面不会卸载。
                  </p>  </div>
              </div>
              <div>
                <h4 id="event-onSuspendCanceled">onSuspendCanceled</h4>
                <div class="summary">
                  <span class="subdued">chrome.runtime.</span>onSuspendCanceled<span class="subdued">.addListener</span>(function()<span class="subdued"> {...}</span>);
                </div>
                <div class="description">
              <p>
                    在 onSuspend 之后发送，表示应用最终不会被卸载。
                  </p>  </div>
              </div>
              <div>
                <h4 id="event-onUpdateAvailable">onUpdateAvailable</h4>
                <div class="summary">
                  <span class="subdued">chrome.runtime.</span>onUpdateAvailable<span class="subdued">.addListener</span>(function(<span>object <span class="variable">details</span></span>)<span class="subdued"> {...}</span>);
                </div>
                <div class="description">
              <p>
                    当更新可用时产生，然而由于应用当前还在运行，不能立即安装。如果您什么都不做，更新将在后台网页下一次卸载时安装。如果您希望快点安装，您可以显式调用 <a href="runtime.html#method-reload">reload</a>。
                  </p>      <h4><!--@Listener Parameters-->监听器参数</h4>
                    <dl>
                      <div>  <a name="property-onUpdateAvailable-details"></a>  <dt>    <span class="variable">details</span>    <span class="property">      (                object      )    </span>  </dt>  <dd>    可用更新的清单文件详情。  </dd>  <dd>    <dl>      <div>        <a name="property-details-version"></a>        <dt>          <span class="variable">version</span>          <span class="property">            (                            string            )          </span>        </dt>        <dd>          可用更新的版本号。        </dd>      </div>    </dl>  </dd></div>
                    </dl>
                </div>
              </div>
              <div>
                <h4 id="event-onConnect">onConnect</h4>
                <div class="summary">
                  <span class="subdued">chrome.runtime.</span>onConnect<span class="subdued">.addListener</span>(function(<span><a href="runtime.html#type-Port">Port</a> <span class="variable">port</span></span>)<span class="subdued"> {...}</span>);
                </div>
                <div class="description">
              <p>
                    当连接从扩展程序进程或内容脚本中发起时产生。
                  </p>      <h4><!--@Listener Parameters-->监听器参数</h4>
                    <dl>
                      <div>  <a name="property-onConnect-port"></a>  <dt>    <span class="variable">port</span>    <span class="property">      (                <a href="runtime.html#type-Port">Port</a>      )    </span>  </dt></div>
                    </dl>
                </div>
              </div>
              <div>
                <h4 id="event-onConnectExternal">onConnectExternal</h4>
                <div class="summary">
                  <span class="subdued">chrome.runtime.</span>onConnectExternal<span class="subdued">.addListener</span>(function(<span><a href="runtime.html#type-Port">Port</a> <span class="variable">port</span></span>)<span class="subdued"> {...}</span>);
                </div>
                <div class="description">
              <p>
                    当连接从另一个扩展程序发起时产生。
                  </p>      <h4><!--@Listener Parameters-->监听器参数</h4>
                    <dl>
                      <div>  <a name="property-onConnectExternal-port"></a>  <dt>    <span class="variable">port</span>    <span class="property">      (                <a href="runtime.html#type-Port">Port</a>      )    </span>  </dt></div>
                    </dl>
                </div>
              </div>
              <div>
                <h4 id="event-onMessage">onMessage</h4>
                <div class="summary">
                  <span class="subdued">chrome.runtime.</span>onMessage<span class="subdued">.addListener</span>(function(<span>any <span class="variable">message</span></span>, <span><a href="runtime.html#type-MessageSender">MessageSender</a> <span class="variable">sender</span></span>, <span>function <span class="variable">sendResponse</span></span>)<span class="subdued"> {...}</span>);
                </div>
                <div class="description">
              <p>
                    当消息从扩展程序进程或者内容脚本中发送时产生。
                  </p>      <h4><!--@Listener Parameters-->监听器参数</h4>
                    <dl>
                      <div>  <a name="property-onMessage-message"></a>  <dt>    <span class="variable">message</span>    <span class="property">      (                any      )    </span>  </dt>  <dd>    调用脚本发送的消息。  </dd></div><div>  <a name="property-onMessage-sender"></a>  <dt>    <span class="variable">sender</span>    <span class="property">      (                <a href="runtime.html#type-MessageSender">MessageSender</a>      )    </span>  </dt></div><div>  <a name="property-onMessage-sendResponse"></a>  <dt>    <span class="variable">sendResponse</span>    <span class="property">      (                function      )    </span>  </dt>  <dd>    当您产生响应时调用（最多一次）的函数，参数可以是任何可转化为 JSON 的对象。如果您在同一个文档中有一个以上的 <code>onRequest</code> 事件处理函数，只有其中一个可以发送响应。当事件处理函数返回时，该函数将失效，除非您在事件处理函数中返回 true，表示您希望通过异步方式发送响应（这样，与另一端之间的消息通道将会保持打开状态，直到调用了 <code>sendResponse</code>）。  </dd></div>
                    </dl>
                    <!-- Adapted from callback.html. Used in the callback parameter in the
                    listener of chrome.webRequest.onAuthRequired. -->
                    <h4><!--@Callback-->监听器回调函数</h4>
                    <p>
                          <em>sendResponse</em> 函数应该以如下形式调用：
                    </p>
                    <pre>sendResponse(response);</pre>
                    <dl>
                        <div>
                          <a name="property-sendResponse-response"></a>
                          <dt>
                            <span class="variable">response</span>
                            <span class="property">
                              (
                                
                                any
                              )
                            </span>
                          </dt>
                          <dd>
                            要发送的 JSON 响应对象。
                          </dd>
                        </div>
                    </dl>
                    <h4>监听器返回值</h4>
                    <dl>
                      <dt><span class="property">
                        ( boolean )
                      </span></dt>
                      <dd>
                      如果您需要在事件监听器返回后再调用 <code>sendResponse</code> 请在事件监听器中返回 true。
                      </dd>
                    </dl>
                </div>
              </div>
              <div>
                <h4 id="event-onMessageExternal">onMessageExternal</h4>
                <div class="summary">
                  <span class="subdued">chrome.runtime.</span>onMessageExternal<span class="subdued">.addListener</span>(function(<span>any <span class="variable">message</span></span>, <span><a href="runtime.html#type-MessageSender">MessageSender</a> <span class="variable">sender</span></span>, <span>function <span class="variable">sendResponse</span></span>)<span class="subdued"> {...}</span>);
                </div>
                <div class="description">
              <p>
                    当消息从另一个扩展程序/应用发送时产生。不能在内容脚本中使用。
                  </p>      <h4><!--@Listener Parameters-->监听器参数</h4>
                    <dl>
                      <div>  <a name="property-onMessageExternal-message"></a>  <dt>    <span class="variable">message</span>    <span class="property">      (                any      )    </span>  </dt>  <dd>    调用脚本发送的消息。  </dd></div><div>  <a name="property-onMessageExternal-sender"></a>  <dt>    <span class="variable">sender</span>    <span class="property">      (                <a href="runtime.html#type-MessageSender">MessageSender</a>      )    </span>  </dt></div><div>  <a name="property-onMessageExternal-sendResponse"></a>  <dt>    <span class="variable">sendResponse</span>    <span class="property">      (                function      )    </span>  </dt>  <dd>    当您产生响应时调用（最多一次）的函数，参数可以是任何可转化为 JSON 的对象。如果您在同一个文档中有一个以上的 <code>onRequest</code> 事件处理函数，只有其中一个可以发送响应。当事件处理函数返回时，该函数将失效，除非您在事件处理函数中返回 true，表示您希望通过异步方式发送响应（这样，与另一端之间的消息通道将会保持打开状态，直到调用了 <code>sendResponse</code>）。  </dd></div>
                    </dl>
                    <!-- Adapted from callback.html. Used in the callback parameter in the
                    listener of chrome.webRequest.onAuthRequired. -->
                    <h4><!--@Callback-->监听器回调函数</h4>
                    <p>
                          <em>sendResponse</em> 函数应该以如下形式调用：
                    </p>
                    <pre>sendResponse(response);</pre>
                    <dl>
                        <div>
                          <a name="property-sendResponse-response"></a>
                          <dt>
                            <span class="variable">response</span>
                            <span class="property">
                              (
                                
                                any
                              )
                            </span>
                          </dt>
                          <dd>
                            要发送的 JSON 响应对象。
                          </dd>
                        </div>
                    </dl>
                    <h4>监听器返回值</h4>
                    <dl>
                      <dt><span class="property">
                        ( boolean )
                      </span></dt>
                      <dd>
                      如果您需要在事件监听器返回后再调用 <code>sendResponse</code> 请在事件监听器中返回 true。
                      </dd>
                    </dl>
                </div>
              </div>
        </div>
          <h2 id="samples"><!--@Sample 应用 that use chrome.runtime-->使用chrome.runtime的示例应用</h2>
            <li><strong><a href="samples.html#802f25ace60971f89f4ac443aaf750cb">Google Drive Uploader</a></strong>
        </li>
            <li><strong><a href="samples.html#65ebf6045d3cdd6c9d6dc506989d72b0">IOIO Demo</a></strong>
            &ndash; Blinks the on-board LED
        </li>
            <li><strong><a href="samples.html#25b901b17473487ec804c6d2daba79d5">Simple Text Editor (Packaged app)</a></strong>
            &ndash; Syntax highlighting text editor
        </li>
            <li><strong><a href="samples.html#73b22d35cfa9f59473f1c56ccf7ca252">Windowing API</a></strong>
        </li>
      </div>
    </div>
  </body>
  <script>
    window.bootstrap = {
      api_names: [{"name":"alarms"},{"name":"app.runtime"},{"name":"app.window"},{"name":"bluetooth"},{"name":"commands"},{"name":"contextMenus"},{"name":"events"},{"name":"fileSystem"},{"name":"i18n"},{"name":"idle"},{"name":"mediaGalleries"},{"name":"permissions"},{"name":"pushMessaging"},{"name":"runtime"},{"name":"serial"},{"name":"socket"},{"name":"storage"},{"name":"tts"},{"name":"types"},{"name":"usb"},{"last":true,"name":"webstore"}].concat(
          [{"name":"experimental.app"},{"name":"experimental.identity"},{"name":"experimental.mediaGalleries"},{"name":"experimental.record"},{"name":"experimental.systemInfo.cpu"},{"name":"experimental.systemInfo.display"},{"name":"experimental.systemInfo.memory"},{"last":true,"name":"experimental.systemInfo.storage"}]),
      branchInfo: {"channels":[{"path":"stable","name":"Stable"},{"path":"dev","name":"Dev"},{"path":"beta","name":"Beta"},{"path":"trunk","name":"Trunk"}],"current":"trunk","showWarning":false}
    };
  </script>
  <div id="gc-footer">
    <div class="text">
      <p>
        <!--@Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
        the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
        Attribution 3.0 License</a>, and code samples are licensed under the
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.-->
        该页面翻译自
        <a href="https://developer.chrome.com/extensions/">Google Chrome Extensions</a>
        与
        <a href="https://developer.chrome.com/apps/">Google Chrome Apps</a>。除非特别<a href="https://code.google.com/policies.html#restrictions">说明</a>，该页面的内容遵循
        <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0
        License</a>，代码示例遵循
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>。
      </p>
      <p>
        <!--@©2012 Google-->
      </p>
      <script src="/trunk/static/js/branch.js" type="text/javascript"></script>
      <script src="/trunk/static/js/sidebar.js" type="text/javascript"></script>
      <script src="/trunk/static/js/prettify.js" type="text/javascript"></script>
      <script>
        (function() {
          // Auto syntax highlight all pre tags.
          var preElements = document.getElementsByTagName('pre');
          for (var i = 0; i < preElements.length; i++)
            preElements[i].classList.add('prettyprint');
          prettyPrint();
        })();
      </script>
      <script src="https://www.google-analytics.com/urchin.js" type="text/javascript"></script>
      <script src="https://www.google-analytics.com/ga.js" type="text/javascript"></script>
      <script type="text/javascript">
        // chrome doc tracking
        try {
          var engdocs = _gat._getTracker("YT-10763712-2");
          engdocs._trackPageview();
        } catch(err) {}
        // code.google.com site-wide tracking
        try {
          _uacct="UA-18071-1";
          _uanchor=1;
          _uff=0;
          urchinTracker();
        }
        catch(e) {/* urchinTracker not available. */}
      </script>
      <script>
        (function() {
          var cx = '002967670403910741006:61_cvzfqtno';
          var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
          gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
        })();
      </script>
  
    </div>
  </div>
</html>

