<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="/trunk/static/css/site.css" rel="stylesheet" type="text/css">
    <link href="/trunk/static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="/trunk/static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href="//www.google.com/images/icons/product/chrome-16.png" rel="icon" type="image/ico">
    <link href="/trunk/static/css/api.css" rel="stylesheet" type="text/css">
    <title>chrome.storage - Google Chrome 扩展程序/应用开发者文档（非官方中文版）</title>
  </head>
  <body>
    <div id="branchWarning" class="displayModeWarning">
      <span><!--@WARNING: this is the trunk documentation. It may not work with the stable release of Chrome.-->警告：这是 trunk 分支的文档，不一定能在稳定版本的 Chrome 浏览器中正常工作。</span>
      <select id="branchChooser">
        <option value=""><!--@Choose a different version...-->选择另一个版本...</option>
        <option value="stable">Stable</option>
        <option value="dev">Dev</option>
        <option value="beta">Beta</option>
        <option value="trunk">Trunk</option>
      </select>
    </div>
    <a id="top"></a>
    <div id="header">
      <span id="logo">
        <a href="http://code.google.com/" id="view-original"><img src="/trunk/static/images/chrome_logo.gif" alt="单击此处查看英文原文"></a>
        <script type="text/javascript">
          document.getElementById('view-original').href = "https://developer.chrome.com" + location.pathname;
        </script>
      </span>
      <span id="cse">
        <gcse:searchbox-only enableAutoComplete="true" autoCompleteMatchTyple="prefix"></gcse:searchbox-only>
      </span>
    </div>
    <a id="gc-topnav-anchor"></a>
    <div id="gc-topnav">
      <h1>Google Chrome 扩展程序（非官方中文版）</h1>
      <ul id="home" class="gc-topnav-tabs">
        <li id="home_link">
          <!--@<a href="index.html" title="Google Chrome 扩展程序 home page"><div>Home</div></a>-->
          <a href="index.html" title="Google Chrome 扩展程序主页"><div>主页</div></a>
        </li>
        <li id="docs_link">
          <!--@<a href="docs.html" title="Official Google Chrome 扩展程序 documentation"><div>Docs</div></a>-->
          <a href="docs.html" title="Google Chrome 扩展程序文档"><div>文档</div></a>
        </li>
        <li id="faq_link">
          <!--@<a href="faq.html" title="Answers to frequently asked questions about Google Chrome 扩展程序"><div>FAQ</div></a>-->
          <a href="faq.html" title="关于 Google Chrome 扩展程序常见问题的答案"><div>常见问题</div></a>
        </li>
        <li id="samples_link">
          <!--@<a href="samples.html" title="Sample 扩展程序 (with source code)"><div>Samples</div></a>-->
          <a href="samples.html" title="示例扩展程序（包含源代码）"><div>示例</div></a>
        </li>
        <li id="group_link">
          <!--<a href="http://groups.google.com/a/chromium.org/group/chromium-extensions" title="Google Chrome 扩展程序 developer forum"><div>Group</div></a>-->
          <a href="http://groups.google.com/a/chromium.org/group/chromium-extensions" title="Google Chrome 扩展程序开发人员论坛"><div>论坛（英文）</div></a>
        </li>
        <li id="so_link">
          <!--<a href="http://stackoverflow.com/questions/tagged/google-chrome-extension" title="[google-chrome-extension] tag on Stack Overflow"><div>Questions?</div></a>-->
          <a href="http://stackoverflow.com/questions/tagged/google-chrome-extension" title="Stack Overflow 上的 [google-chrome-extension] 标签"><div>问题？（英文）</div></a>
        </li>
      </ul>
    </div>
    <div id="gc-container">
      <div id="gc-sidebar">
        <ul 
            class="level1 ">
          <li class="level2">
                <a href="getstarted.html" class="level2 ">入门</a>
          </li>
          <li class="level2">
                <a href="overview.html" class="level2 ">概述</a>
          </li>
          <li class="level2">
                <a href="whats_new.html" class="level2 ">新增功能</a>
          </li>
          <li class="level2">
                <a href="devguide.html" class="level2 ">开发者指南</a>
              <ul 
                  class="level2 ">
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">浏览器用户界面</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="browserAction.html" class="level4 ">浏览器按钮</a>
                      </li>
                      <li class="level4">
                            <a href="contextMenus.html" class="level4 ">右键菜单</a>
                      </li>
                      <li class="level4">
                            <a href="notifications.html" class="level4 ">桌面通知</a>
                      </li>
                      <li class="level4">
                            <a href="omnibox.html" class="level4 ">多功能框</a>
                      </li>
                      <li class="level4">
                            <a href="options.html" class="level4 ">选项页面</a>
                      </li>
                      <li class="level4">
                            <a href="override.html" class="level4 ">替代页面</a>
                      </li>
                      <li class="level4">
                            <a href="pageAction.html" class="level4 ">页面按钮</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">浏览器交互</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="bookmarks.html" class="level4 ">书签</a>
                      </li>
                      <li class="level4">
                            <a href="cookies.html" class="level4 ">Cookie</a>
                      </li>
                      <li class="level4">
                            <a href="devtools.html" class="level4 ">开发者工具</a>
                      </li>
                      <li class="level4">
                            <a href="events.html" class="level4 ">事件</a>
                      </li>
                      <li class="level4">
                            <a href="history.html" class="level4 ">历史记录</a>
                      </li>
                      <li class="level4">
                            <a href="management.html" class="level4 ">管理</a>
                      </li>
                      <li class="level4">
                            <a href="tabs.html" class="level4 ">标签页</a>
                      </li>
                      <li class="level4">
                            <a href="windows.html" class="level4 ">窗口</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">实现</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="a11y.html" class="level4 ">辅助功能</a>
                      </li>
                      <li class="level4">
                            <a href="event_pages.html" class="level4 ">事件页面</a>
                      </li>
                      <li class="level4">
                            <a href="contentSecurityPolicy.html" class="level4 ">内容安全策略</a>
                      </li>
                      <li class="level4">
                            <a href="content_scripts.html" class="level4 ">内容脚本</a>
                      </li>
                      <li class="level4">
                            <a href="xhr.html" class="level4 ">跨站 XHR</a>
                      </li>
                      <li class="level4">
                            <a href="i18n.html" class="level4 ">国际化支持</a>
                      </li>
                      <li class="level4">
                            <a href="messaging.html" class="level4 ">消息传递</a>
                      </li>
                      <li class="level4">
                            <a href="permissions.html" class="level4 ">可选权限</a>
                      </li>
                      <li class="level4">
                            <a href="npapi.html" class="level4 ">NPAPI 插件</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">完成</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="hosting.html" class="level4 ">托管</a>
                      </li>
                      <li class="level4">
                            <a href="external_extensions.html" class="level4 ">其他发布选项</a>
                      </li>
                    </ul>
                </li>
              </ul>
          </li>
          <li class="level2">
                <a href="tutorials.html" class="level2 ">教程</a>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="tut_migration_to_manifest_v2.html" class="level3 ">清单文件版本2</a>
                </li>
                <li class="level3">
                      <a href="tut_debugging.html" class="level3 ">调试</a>
                </li>
                <li class="level3">
                      <a href="tut_analytics.html" class="level3 ">Google Analytics（分析）</a>
                </li>
                <li class="level3">
                      <a href="tut_oauth.html" class="level3 ">OAuth</a>
                </li>
              </ul>
          </li>
          <li class="level2">
                <span class="level2">参考</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">格式</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="manifest.html" class="level4 ">清单文件</a>
                      </li>
                      <li class="level4">
                            <a href="match_patterns.html" class="level4 ">匹配表达式</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                      <a href="permission_warnings.html" class="level3 ">权限警告</a>
                </li>
                <li class="level3">
                      <a href="api_index.html" class="level3 ">chrome.* API</a>
                </li>
                <li class="level3">
                      <a href="api_other.html" class="level3 ">其他 API</a>
                </li>
              </ul>
          </li>
          <li class="level2">
                <span class="level2">更多</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="https://code.google.com/chrome/webstore/docs/index.html" class="level3 ">Chrome 网上应用店</a>
                </li>
                <li class="level3">
                      <a href="https://code.google.com/chrome/apps/docs/developers_guide.html" class="level3 ">托管应用</a>
                </li>
                <li class="level3">
                      <a href="themes.html" class="level3 ">主题背景</a>
                </li>
              </ul>
          </li>
        </ul>
      </div>
      <div id="gc-pagecontent">
        <h1 class="page_title">chrome.storage</h1>
        
        
        
        <div id="toc">
          <h2><!--@Contents-->目录</h2>
          <ol>
            <li>
              <a href=#overview>概述</a>
            </li>
            <li>
              <a href=#manifest>清单文件</a>
            </li>
            <li>
              <a href=#using-sync>用法</a>
            </li>
            <li>
              <a href=#limits>存储空间与调用频率限制</a>
            </li>
            <li>
              <a href=#examples>例子</a>
            </li>
            <li>
              <a href="#apiReference"><!--@API reference: -->API 参考：chrome.storage</a>
              <ol>
                  <li><a href="#types"><!--@Types-->类型</a><ol>  <li>    <a href="#type-StorageChange">StorageChange</a>  </li>  <li>    <a href="#type-StorageArea">StorageArea</a><ol><li>      <a href="#StorageArea-methods"><!--@Methods-->方法</a>      <ol>        <li><a href="#method-StorageArea-get">get</a></li>        <li><a href="#method-StorageArea-getBytesInUse">getBytesInUse</a></li>        <li><a href="#method-StorageArea-set">set</a></li>        <li><a href="#method-StorageArea-remove">remove</a></li>        <li><a href="#method-StorageArea-clear">clear</a></li>      </ol>    </li></ol>  </li></ol></li>
                  <li><a href="#properties"><!--@Properties-->属性</a><ol>  <li>    <a href="#property-sync">sync</a><ol><li>      <a href="#sync-properties"><!--@Properties-->属性</a>      <ol>        <li>          <a href="#property-sync-QUOTA_BYTES">QUOTA_BYTES</a>        </li>        <li>          <a href="#property-sync-QUOTA_BYTES_PER_ITEM">QUOTA_BYTES_PER_ITEM</a>        </li>        <li>          <a href="#property-sync-MAX_ITEMS">MAX_ITEMS</a>        </li>        <li>          <a href="#property-sync-MAX_WRITE_OPERATIONS_PER_HOUR">MAX_WRITE_OPERATIONS_PER_HOUR</a>        </li>        <li>          <a href="#property-sync-MAX_SUSTAINED_WRITE_OPERATIONS_PER_MINUTE">MAX_SUSTAINED_WRITE_OPERATIONS_PER_MINUTE</a>        </li>      </ol>    </li></ol>  </li>  <li>    <a href="#property-local">local</a><ol><li>      <a href="#local-properties"><!--@Properties-->属性</a>      <ol>        <li>          <a href="#property-local-QUOTA_BYTES">QUOTA_BYTES</a>        </li>      </ol>    </li></ol>  </li></ol></li>
                  
                  <li><a href="#events"><!--@Events-->事件</a><ol>  <li><a href="#event-onChanged">onChanged</a></li></ol></li>
                  <li><a href="#samples"><!--@Sample -->示例扩展程序</a></li>
              </ol>
            </li>
          </ol>
        </div>

<table class="intro">
  <tr>
    <th scope="col"></th>
    <th scope="col"></th>
  </tr>
  <tr>
    <td><strong><!--@Description:-->描述：</strong></td>
    <td><!--@Use the-->使用 <code>chrome.storage</code> <!--@module
    to store, retrieve, and track changes to user data.-->模块存储、接收和追踪用户数据的更改。</td>
  </tr>
  <tr>
    <td><strong><!--@Availability:-->可用版本：</strong></td>
    <td>Google Chrome 20</td>
  </tr>
  <tr>
    <td><strong><!--@Permissions:-->权限：</strong></td>
    <td><code>"storage"</code></td>
  </tr>
  <tr>
    <td><strong><!--@Learn more:-->了解更多：</strong></td>
    <td><a href="https://developers.google.com/live/shows/7320022/"><!--@Chrome Apps Office Hours: Chrome Storage APIs-->Chrome 应用办公时间：Chrome 存储 API</a>（英文）<br>
    <a href="https://developers.google.com/live/shows/7320022-1/"><!--@Chrome Apps Office Hours: Storage API Deep Dive-->Chrome 应用办公时间：深入探索存储 API</a>（英文）</td>
  </tr>
</table>

<h2 id="overview"><!--@Overview-->概述</h2>

<p id="classSummary">
<!--@This API has been optimized
to meet the specific storage needs of extensions.
It provides the same storage capabilities as the
<a href="https://developer.mozilla.org/en/DOM/Storage#localStorage">localStorage API</a>
with the following key differences:-->
这一 API 为扩展程序的存储需要而特别优化，它提供了与
<a href="https://developer.mozilla.org/en/DOM/Storage#localStorage">localStorage API</a>
相同的能力，但是具有如下几个重要的区别：
</p>

<ul>
  <li><!--@User data can be automatically synced with Chrome sync
  (using <code>storage.sync</code>).-->
  用户数据可以通过 Chrome
  浏览器的同步功能自动同步（使用
  <code>storage.sync</code>）。
  </li>
  <li><!--@Your extension's content scripts can directly access user data
  without the need for a background page.-->
  您的扩展程序的内容脚本可以直接访问用户数据，而不需要后台页面。
  </li>
  <li><!--@A user's extension settings can be persisted
  even when using
  <a href="manifest.html#incognito">split incognito behavior</a>.-->
  即使使用<a href="manifest.html#incognito">分离式隐身行为</a>，用户的扩展程序设置也会保留。
  </li>
  <li><!--@It's asynchronous with bulk read and write operations, and therefore
  faster than the blocking and serial <code>localStorage API</code>.-->
  它是异步的，并且能够进行大量的读写操作，因此比阻塞和串行化的
  <code>localStorage</code> API 更快。
  <li><!--@User data can be stored as objects
  (the <code>localStorage API</code> stores data in strings).-->
  用户数据可以存储为对象（<code>localStorage</code> API
  以字符串方式存储数据）。
  </li>
</ul>

<h2 id="manifest"><!--@Manifest-->清单文件</h2>
<p><!--@You must declare the "storage" permission in the <a
  href="manifest.html">extension manifest</a>
  to use the storage API.
  For example:-->
  您必须在<a href="manifest.html">扩展程序的清单文件</a>中声明
  "storage" 权限才能使用存储 API。例如：
</p>
<pre>{
  "name": "我的扩展程序",
  ...
  <b>"permissions": [
    "storage"
  ]</b>,
  ...
}</pre>

<h2 id="using-sync"><!--@Usage-->用法</h2>

<p>
<!--@To store user data for your extension,
you can use either
<code>storage.sync</code> or
<code>storage.local</code>.
When using <code>storage.sync</code>,
the stored data will automatically be synced
to any Chrome browser that the user is logged into,
provided the user has sync enabled.-->
如果要为您的扩展程序储存用户数据，您可以使用
<code>storage.sync</code> 或 <code>storage.local</code>。使用
<code>storage.sync</code>
时，储存的数据将会自动在用户启用同步功能并已经登录的所有
Chrome 浏览器间同步。
</p>

<p>
<!--@When Chrome is offline,
Chrome stores the data locally.
The next time the browser is online,
Chrome syncs the data.
Even if a user disables syncing,
<code>storage.sync</code> will still work.
In this case, it will behave identically
to <code>storage.local</code>.-->
当 Chrome 浏览器处于离线状态时，Chrome
浏览器将数据储存在本地。下一次浏览器在线时，Chrome
浏览器将会同步数据。即使用户关闭了同步，<code>storage.sync</code>
仍然有效，只是此时它与 <code>storage.local</code> 的行为相同。
</p>

<p class="warning">
<!--@Confidential user information should not be stored!
The storage area isn't encrypted.-->
不应该储存机密的用户信息！存储区没有加密。
</p>

<h2 id="limits"><!--@Storage and throttling limits-->存储空间与调用频率限制</h2>

<p><code>chrome.storage</code> <!--@is not a big truck.
It's a series of tubes.
And if you don't understand,
those tubes can be filled,
and if they are filled
when you put your message in,
it gets in line,
and it's going to be delayed
by anyone that puts into that tube
enormous amounts of material.-->
并不像一辆大卡车那样，而是像一系列的管道，如果您不理解这一点的话，这样的管道很容易被填满。如果当您存入消息时它们填满了，它将会变成细线，任何人向其中存入大量数据都有可能使操作产生延迟。

<p><!--@For details on the current limits
of the storage API, and what happens
when those limits are exceeded, please
see the-->
有关目前对存储 API 的限制以及超出限制的结果，请参见
<a href="#apiReference">API <!--@reference-->参考</a><!--@.-->。


<h2 id="examples"><!--@Examples-->例子</h2>

<p>
<!--@The following example checks for
CSS code saved by a user on a form,
and if found,
stores it.-->
以下例子检查用户在表单中保存的 CSS
代码，如果找到的话则存储下来。
</p>

<pre>
function saveChanges() {
  // 获取表单中保存的值。
  var theValue = textarea.value;
  // 确保包含代码。
  if (!theValue) {
    message('错误：没有指定值');
    return;
  }
  // 使用 Chrome 扩展程序的存储 API 保存它。
  chrome.storage.sync.set({'value': theValue}, function() {
    // 通知保存完成。
    message('设置已保存');
  });
}
</pre>

<p>
<!--@If you're interested in tracking changes made
to a data object,
you can add a listener
to its <code>onChanged</code> event.
Whenever anything changes in storage,
that event fires.
Here's sample code
to listen for saved changes:-->
如果您希望追踪数据对象的更改，您可以向
<code>onChanged</code>
事件添加监听器，每当存储有任何更改时将会产生该事件。如下是监听对已保存内容的更改的示例代码：
</p>

<pre>
chrome.storage.onChanged.addListener(function(changes, namespace) {
  for (key in changes) {
    var storageChange = changes[key];
    console.log('存储键“%s”（位于“%s”命名空间中）已更改。' +
                    '原来的值为“%s”，新的值为“%s”。',
                key,
                namespace,
                storageChange.oldValue,
                storageChange.newValue);
  }
});
</pre>

<p>
<!--@You can find examples that use this API on the
<a href="samples.html#sty">Samples page</a>.-->
您可以在<a href="samples.html#storage">示例页面</a>找到使用这一
API 的例子。
</p>
        <h2 id="apiReference"><!--@API Reference: chrome.storage-->API 参考：chrome.storage</h2>
        <div class="api_reference">
            <h3 id="types"><!--@Types-->类型</h3>
              <div>
                <h3 id="type-StorageChange">StorageChange</h3>
                <div>
                  <dt><span class="type_name">  (    object  )</span></dt>
                  <h4 id="StorageChange-properties">
                    <!--@Properties of --><a href="#type-StorageChange">StorageChange</a>
                    的属性
                  </h4>
                  <dd><dl>      <div>
                      <a name="property-StorageChange-oldValue"></a>
                      <dt>
                        <span class="variable">oldValue</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            any
                          )
                        </span>
                      </dt>
                      <dd>
                        如果有旧值，则为项目的旧值。
                      </dd>
                    </div>
                    <div>
                      <a name="property-StorageChange-newValue"></a>
                      <dt>
                        <span class="variable">newValue</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            any
                          )
                        </span>
                      </dt>
                      <dd>
                        如果有新值，则为项目的新值。
                      </dd>
                    </div>
              </dl></dd>
                </div>
              </div>
              <div>
                <h3 id="type-StorageArea">StorageArea</h3>
                <div>
                  <dt><span class="type_name">  (    object  )</span></dt>
                  <h4 id="StorageArea-methods">
                    <!--@Methods of --><a href="#type-StorageArea">StorageArea</a>
                    的方法
                  </h4>
                  <dd><dl>      <div>
                      <h4 id="method-StorageArea-get">get</h4>
                      <div class="summary lower">
                        <span>StorageArea.</span>get</span>(<span class="optional">string or array of string or object <span class="variable">keys</span></span>, <span>function <span class="variable">callback</span></span>)
                      </div>
                      <div class="description">
                        <p>
                          从存储中获得一个或多个值。
                        </p>
                        <h4><!--@Parameters-->参数</h4>
                        <dl>
                            <div>
                              <a name="property-get-keys"></a>
                              <dt>
                                <span class="variable">keys</span>
                                <span class="property">
                                  (
                                    <span class="optional">optional</span>
                                    string or 
                                    array of string or 
                                    object
                                  )
                                </span>
                              </dt>
                              <dd>
                                要获得的单个键、多个键的列表或者指定默认值的词典（参见对象的描述），空的列表或对象将会返回空的结果对象。要获得存储的所有内容，请传递 <code>null</code>。
                              </dd>
                            </div>
                            <div>
                              <a name="property-get-callback"></a>
                              <dt>
                                <span class="variable">callback</span>
                                <span class="property">
                                  (
                                    
                                    function
                                  )
                                </span>
                              </dt>
                              <dd>
                                包含存储项目或者表示失败（这种情况下会设置 <a href="runtime.html#property-lastError">runtime.lastError</a>）的回调函数。
                              </dd>
                            </div>
                        </dl>
                          <h4><!--@Callback-->回调函数</h4>
                          <p>
                                <!--@The <em>callback</em> parameter should specify a function
                                that looks like this:-->
                                <em>callback</em> 参数应该指定一个如下形式的函数：
                          </p>
                          <pre>function(object items) <span class="subdued">{...}</span>;</pre>
                          <dl>
                              <div>
                                <a name="property-callback-items"></a>
                                <dt>
                                  <span class="variable">items</span>
                                  <span class="property">
                                    (
                                      
                                      object
                                    )
                                  </span>
                                </dt>
                                <dd>
                                  包含按键-值映射的项目对象。
                                </dd>
                              </div>
                          </dl>
                      </div>
                    </div>
                    <div>
                      <h4 id="method-StorageArea-getBytesInUse">getBytesInUse</h4>
                      <div class="summary lower">
                        <span>StorageArea.</span>getBytesInUse</span>(<span class="optional">string or array of string <span class="variable">keys</span></span>, <span>function <span class="variable">callback</span></span>)
                      </div>
                      <div class="description">
                        <p>
                          获得一个或多个项目正在使用的空间大小（以字节为单位）。
                        </p>
                        <h4><!--@Parameters-->参数</h4>
                        <dl>
                            <div>
                              <a name="property-getBytesInUse-keys"></a>
                              <dt>
                                <span class="variable">keys</span>
                                <span class="property">
                                  (
                                    <span class="optional">optional</span>
                                    string or 
                                    array of string
                                  )
                                </span>
                              </dt>
                              <dd>
                                要获得总计使用空间的单个键或多个键的列表，空的列表或对象将会返回 0。要获得所有存储占用的总空间，请传递 <code>null</code>。
                              </dd>
                            </div>
                            <div>
                              <a name="property-getBytesInUse-callback"></a>
                              <dt>
                                <span class="variable">callback</span>
                                <span class="property">
                                  (
                                    
                                    function
                                  )
                                </span>
                              </dt>
                              <dd>
                                回调函数，将传递存储占用的空间大小，或者指示失败（这种情况下将会设置 <a href="runtime.html#property-lastError">runtime.lastError</a>）
                              </dd>
                            </div>
                        </dl>
                          <h4><!--@Callback-->回调函数</h4>
                          <p>
                                <!--@The <em>callback</em> parameter should specify a function
                                that looks like this:-->
                                <em>callback</em> 参数应该指定一个如下形式的函数：
                          </p>
                          <pre>function(integer bytesInUse) <span class="subdued">{...}</span>;</pre>
                          <dl>
                              <div>
                                <a name="property-callback-bytesInUse"></a>
                                <dt>
                                  <span class="variable">bytesInUse</span>
                                  <span class="property">
                                    (
                                      
                                      integer
                                    )
                                  </span>
                                </dt>
                                <dd>
                                  正在使用的存储空间大小，以字节为单位。
                                </dd>
                              </div>
                          </dl>
                      </div>
                    </div>
                    <div>
                      <h4 id="method-StorageArea-set">set</h4>
                      <div class="summary lower">
                        <span>StorageArea.</span>set</span>(<span>object <span class="variable">items</span></span>, <span class="optional">function <span class="variable">callback</span></span>)
                      </div>
                      <div class="description">
                        <p>
                          设置多个项目。
                        </p>
                        <h4><!--@Parameters-->参数</h4>
                        <dl>
                            <div>
                              <a name="property-set-items"></a>
                              <dt>
                                <span class="variable">items</span>
                                <span class="property">
                                  (
                                    
                                    object
                                  )
                                </span>
                              </dt>
                              <dd>
                                要向存储添加的对象，不能被序列化（函数等）的值将被忽略。
                              </dd>
                            </div>
                            <div>
                              <a name="property-set-callback"></a>
                              <dt>
                                <span class="variable">callback</span>
                                <span class="property">
                                  (
                                    <span class="optional">optional</span>
                                    function
                                  )
                                </span>
                              </dt>
                              <dd>
                                在成功或失败（这种情况下会设置 <a href="runtime.html#property-lastError">runtime.lastError</a>）时调用。
                              </dd>
                            </div>
                        </dl>
                          <h4><!--@Callback-->回调函数</h4>
                          <p>
                                <!--@If you specify the <em>callback</em> parameter, it should
                                specify a function that looks like this:-->
                                如果您指定了 <em>callback</em> 参数，它应该指定一个如下形式的函数：
                          </p>
                          <pre>function() <span class="subdued">{...}</span>;</pre>
                      </div>
                    </div>
                    <div>
                      <h4 id="method-StorageArea-remove">remove</h4>
                      <div class="summary lower">
                        <span>StorageArea.</span>remove</span>(<span>string or array of string <span class="variable">keys</span></span>, <span class="optional">function <span class="variable">callback</span></span>)
                      </div>
                      <div class="description">
                        <p>
                          从存储中移除一个或多个项目。
                        </p>
                        <h4><!--@Parameters-->参数</h4>
                        <dl>
                            <div>
                              <a name="property-remove-keys"></a>
                              <dt>
                                <span class="variable">keys</span>
                                <span class="property">
                                  (
                                    
                                    string or 
                                    array of string
                                  )
                                </span>
                              </dt>
                              <dd>
                                单个键或多个键的列表，表示要移除的内容。
                              </dd>
                            </div>
                            <div>
                              <a name="property-remove-callback"></a>
                              <dt>
                                <span class="variable">callback</span>
                                <span class="property">
                                  (
                                    <span class="optional">optional</span>
                                    function
                                  )
                                </span>
                              </dt>
                              <dd>
                                在成功或失败（这种情况下会设置 <a href="runtime.html#property-lastError">runtime.lastError</a>）时调用。
                              </dd>
                            </div>
                        </dl>
                          <h4><!--@Callback-->回调函数</h4>
                          <p>
                                <!--@If you specify the <em>callback</em> parameter, it should
                                specify a function that looks like this:-->
                                如果您指定了 <em>callback</em> 参数，它应该指定一个如下形式的函数：
                          </p>
                          <pre>function() <span class="subdued">{...}</span>;</pre>
                      </div>
                    </div>
                    <div>
                      <h4 id="method-StorageArea-clear">clear</h4>
                      <div class="summary lower">
                        <span>StorageArea.</span>clear</span>(<span class="optional">function <span class="variable">callback</span></span>)
                      </div>
                      <div class="description">
                        <p>
                          从存储中删除所有值。
                        </p>
                        <h4><!--@Parameters-->参数</h4>
                        <dl>
                            <div>
                              <a name="property-clear-callback"></a>
                              <dt>
                                <span class="variable">callback</span>
                                <span class="property">
                                  (
                                    <span class="optional">optional</span>
                                    function
                                  )
                                </span>
                              </dt>
                              <dd>
                                在成功或失败（这种情况下会设置 <a href="runtime.html#property-lastError">runtime.lastError</a>）时调用。
                              </dd>
                            </div>
                        </dl>
                          <h4><!--@Callback-->回调函数</h4>
                          <p>
                                <!--@If you specify the <em>callback</em> parameter, it should
                                specify a function that looks like this:-->
                                如果您指定了 <em>callback</em> 参数，它应该指定一个如下形式的函数：
                          </p>
                          <pre>function() <span class="subdued">{...}</span>;</pre>
                      </div>
                    </div>
              </dl></dd>
                </div>
              </div>
            <h3 id="properties"><!--@Properties-->属性</h3>
              <div>
                <h3 id="property-sync">sync</h3>
                <div class="summary">
                  <span><span class="subdued">chrome.storage.</span>sync</span>
                </div>
                <div>
                  <dt><span class="property">sync</span> <span class="type_name">  (    <a href="storage.html#type-StorageArea">StorageArea</a>  )</span></dt>
              <dd>
                    位于 <code>sync</code>（同步）存储区下的项目将通过 Chrome 浏览器的同步功能同步。
                  </dd>    <h4 id="sync-properties">
                    <!--@Properties of --><a href="#property-sync">sync</a>
                    的属性
                  </h4>
                  <dd><dl>      <div>
                      <a name="property-sync-QUOTA_BYTES"></a>
                      <dt>
                        <span class="variable">QUOTA_BYTES</span>
                        <span class="property">
                          (
                            
                            <code>102,400</code>
                          )
                        </span>
                      </dt>
                      <dd>
                        可以在同步存储区储存的数据量大小（以字节为单位），计算方式为每一个值 JSON 字符串化的结果加上每一个键的长度。超出该限制的更新将失败，并设置 <a href="runtime.html#property-lastError">runtime.lastError</a>。
                      </dd>
                    </div>
                    <div>
                      <a name="property-sync-QUOTA_BYTES_PER_ITEM"></a>
                      <dt>
                        <span class="variable">QUOTA_BYTES_PER_ITEM</span>
                        <span class="property">
                          (
                            
                            <code>4,096</code>
                          )
                        </span>
                      </dt>
                      <dd>
                        同步存储区中每个项目的最大大小（以字节为单位），计算方式为值 JSON 字符串化的结果加上键的长度。包含的项目比该限制大的更新将失败，并设置 <a href="runtime.html#property-lastError">runtime.lastError</a>。
                      </dd>
                    </div>
                    <div>
                      <a name="property-sync-MAX_ITEMS"></a>
                      <dt>
                        <span class="variable">MAX_ITEMS</span>
                        <span class="property">
                          (
                            
                            <code>512</code>
                          )
                        </span>
                      </dt>
                      <dd>
                        可以储存在同步存储区中的最大项目数目。超出该限制的更新将失败，并设置 <a href="runtime.html#property-lastError">runtime.lastError</a>。
                      </dd>
                    </div>
                    <div>
                      <a name="property-sync-MAX_WRITE_OPERATIONS_PER_HOUR"></a>
                      <dt>
                        <span class="variable">MAX_WRITE_OPERATIONS_PER_HOUR</span>
                        <span class="property">
                          (
                            
                            <code>1,000</code>
                          )
                        </span>
                      </dt>
                      <dd>
                        一小时内可以进行的 <code>se</code>（设置）、<code>remove</code>（移除）或<code>clear</code>（清除）操作的最大次数。超出该限制的更新将失败，并设置 <a href="runtime.html#property-lastError">runtime.lastError</a>。
                      </dd>
                    </div>
                    <div>
                      <a name="property-sync-MAX_SUSTAINED_WRITE_OPERATIONS_PER_MINUTE"></a>
                      <dt>
                        <span class="variable">MAX_SUSTAINED_WRITE_OPERATIONS_PER_MINUTE</span>
                        <span class="property">
                          (
                            
                            <code>10</code>
                          )
                        </span>
                      </dt>
                      <dd>
                        在 10 分钟的时间段内，每分钟可以进行的 <code>se</code>（设置）、<code>remove</code>（移除）或<code>clear</code>（清除）操作的最大次数。超出该限制的更新将失败，并设置 <a href="runtime.html#property-lastError">runtime.lastError</a>。
                      </dd>
                    </div>
              </dl></dd>
                </div>
              </div>
              <div>
                <h3 id="property-local">local</h3>
                <div class="summary">
                  <span><span class="subdued">chrome.storage.</span>local</span>
                </div>
                <div>
                  <dt><span class="property">local</span> <span class="type_name">  (    <a href="storage.html#type-StorageArea">StorageArea</a>  )</span></dt>
              <dd>
                    位于 <code>local</code>（本机）存储区下的项目仅对每一台计算机有效。
                  </dd>    <h4 id="local-properties">
                    <!--@Properties of --><a href="#property-local">local</a>
                    的属性
                  </h4>
                  <dd><dl>      <div>
                      <a name="property-local-QUOTA_BYTES"></a>
                      <dt>
                        <span class="variable">QUOTA_BYTES</span>
                        <span class="property">
                          (
                            
                            <code>5,242,880</code>
                          )
                        </span>
                      </dt>
                      <dd>
                        可以在本地存储区储存的数据量大小（以字节为单位），计算方式为每一个值 JSON 字符串化的结果加上每一个键的长度。如果扩展程序拥有 <code>unlimitedStorage</code> 权限则会忽略这一值。
                      </dd>
                    </div>
              </dl></dd>
                </div>
              </div>
            <h3 id="events"><!--@Events-->事件</h3>
              <div>
                <h4 id="event-onChanged">onChanged</h4>
                <div class="summary">
                  <span class="subdued">chrome.storage.</span>onChanged<span class="subdued">.addListener</span>(function(<span>object <span class="variable">changes</span></span>, <span>string <span class="variable">areaName</span></span>)<span class="subdued"> {...}</span>);
                </div>
                <div class="description">
              <p>
                    当一个或多个项目更改时产生。
                  </p>      <h4><!--@Listener Parameters-->监听器参数</h4>
                    <dl>
                      <div>  <a name="property-onChanged-changes"></a>  <dt>    <span class="variable">changes</span>    <span class="property">      (                object      )    </span>  </dt>  <dd>    一个对象，将更改的每一个键映射到该项目对应的 <a href="storage.html#type-StorageChange">StorageChange</a> 对象。  </dd></div><div>  <a name="property-onChanged-areaName"></a>  <dt>    <span class="variable">areaName</span>    <span class="property">      (                string      )    </span>  </dt>  <dd>    这一更改对应的存储区（"sync"（同步）或"local"（本机））。  </dd></div>
                    </dl>
                </div>
              </div>
        </div>
          <h2 id="samples"><!--@Sample 扩展程序 that use chrome.storage-->使用chrome.storage的示例扩展程序</h2>
            <li><strong><a href="samples.html#3680ae406d5eb5fd580b19a93b88b6bf">Stylizr</a></strong>
            &ndash; Spruce up your pages with custom CSS.
        </li>
            <li><strong><a href="samples.html#0837f59976e148ed9922266e1de6c29f">WebNavigation Tech Demo</a></strong>
            &ndash; Demonstration of the WebNavigation extension API.
        </li>
            <li><strong><a href="samples.html#7918ead5edfd0f65c5bf982020d21b54">Calculator</a></strong>
            &ndash; A simple calculator.
        </li>
            <li><strong><a href="samples.html#9fa1c6ac42d625c3f62314548468640c">Chromium Buildbot Monitor</a></strong>
            &ndash; Displays the status of the Chromium buildbot in the toolbar.  Click to see more detailed status in a popup.
        </li>
      </div>
    </div>
  </body>
  <script>
    window.bootstrap = {
      api_names: [{"name":"alarms"},{"name":"bookmarks"},{"name":"browserAction"},{"name":"browsingData"},{"name":"commands"},{"name":"contentSettings"},{"name":"contextMenus"},{"name":"cookies"},{"name":"debugger"},{"name":"declarativeContent"},{"name":"declarativeWebRequest"},{"name":"devtools.inspectedWindow"},{"name":"devtools.network"},{"name":"devtools.panels"},{"name":"downloads"},{"name":"events"},{"name":"extension"},{"name":"fileBrowserHandler"},{"name":"fontSettings"},{"name":"history"},{"name":"i18n"},{"name":"idle"},{"name":"input.ime"},{"name":"management"},{"name":"omnibox"},{"name":"pageAction"},{"name":"pageCapture"},{"name":"permissions"},{"name":"privacy"},{"name":"proxy"},{"name":"pushMessaging"},{"name":"runtime"},{"name":"scriptBadge"},{"name":"sessionRestore"},{"name":"storage"},{"name":"tabCapture"},{"name":"tabs"},{"name":"topSites"},{"name":"tts"},{"name":"ttsEngine"},{"name":"types"},{"name":"webNavigation"},{"name":"webRequest"},{"name":"webstore"},{"last":true,"name":"windows"}].concat(
          [{"name":"experimental.devtools.audits"},{"name":"experimental.devtools.console"},{"name":"experimental.discovery"},{"name":"experimental.history"},{"name":"experimental.identity"},{"name":"experimental.infobars"},{"name":"experimental.processes"},{"name":"experimental.record"},{"name":"experimental.speechInput"},{"name":"experimental.systemInfo.cpu"},{"last":true,"name":"experimental.systemInfo.storage"}]),
      branchInfo: {"channels":[{"path":"stable","name":"Stable"},{"path":"dev","name":"Dev"},{"path":"beta","name":"Beta"},{"path":"trunk","name":"Trunk"}],"current":"trunk","showWarning":true}
    };
  </script>
  <div id="gc-footer">
    <div class="text">
      <p>
        <!--@Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
        the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
        Attribution 3.0 License</a>, and code samples are licensed under the
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.-->
        该页面翻译自
        <a href="https://developer.chrome.com/extensions/">Google Chrome Extensions</a>
        与
        <a href="https://developer.chrome.com/apps/">Google Chrome Apps</a>。除非特别<a href="https://code.google.com/policies.html#restrictions">说明</a>，该页面的内容遵循
        <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0
        License</a>，代码示例遵循
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>。
      </p>
      <p>
        <!--@©2012 Google-->
      </p>
      <script src="/trunk/static/js/branch.js" type="text/javascript"></script>
      <script src="/trunk/static/js/sidebar.js" type="text/javascript"></script>
      <script src="/trunk/static/js/prettify.js" type="text/javascript"></script>
      <script>
        (function() {
          // Auto syntax highlight all pre tags.
          var preElements = document.getElementsByTagName('pre');
          for (var i = 0; i < preElements.length; i++)
            preElements[i].classList.add('prettyprint');
          prettyPrint();
        })();
      </script>
      <script src="https://www.google-analytics.com/urchin.js" type="text/javascript"></script>
      <script src="https://www.google-analytics.com/ga.js" type="text/javascript"></script>
      <script type="text/javascript">
        // chrome doc tracking
        try {
          var engdocs = _gat._getTracker("YT-10763712-2");
          engdocs._trackPageview();
        } catch(err) {}
        // code.google.com site-wide tracking
        try {
          _uacct="UA-18071-1";
          _uanchor=1;
          _uff=0;
          urchinTracker();
        }
        catch(e) {/* urchinTracker not available. */}
      </script>
      <script>
        (function() {
          var cx = '002967670403910741006:61_cvzfqtno';
          var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
          gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
        })();
      </script>
  
    </div>
  </div>
</html>

