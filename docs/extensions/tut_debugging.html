<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="static/css/site.css" rel="stylesheet" type="text/css">
    <link href="static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href="//www.google.com/images/icons/product/chrome-16.png" rel="icon" type="image/ico">
    <title>Tutorial: Debugging - Google Chrome</title>
  </head>
  <body>
    <a id="top"></a>
    <div id="header">
      <span id="logo">
        <a href="http://code.google.com/"><img src="static/images/chrome_logo.gif" alt="Google Code Labs"></a>
      </span>
      <span id="cse">
        <gcse:searchbox-only enableAutoComplete="true" autoCompleteMatchTyple="prefix"></gcse:searchbox-only>
      </span>
    </div>
    <a id="gc-topnav-anchor"></a>
    <div id="gc-topnav">
      <h1>Google Chrome 扩展程序（非官方中文版）</h1>
      <ul id="home" class="gc-topnav-tabs">
        <li id="home_link">
          <!--@<a href="index.html" title="Google Chrome 扩展程序 home page"><div>Home</div></a>-->
          <a href="index.html" title="Google Chrome 扩展程序主页"><div>主页</div></a>
        </li>
        <li id="docs_link">
          <!--@<a href="docs.html" title="Official Google Chrome 扩展程序 documentation"><div>Docs</div></a>-->
          <a href="docs.html" title="Google Chrome 扩展程序文档"><div>文档</div></a>
        </li>
        <li id="faq_link">
          <!--@<a href="faq.html" title="Answers to frequently asked questions about Google Chrome 扩展程序"><div>FAQ</div></a>-->
          <a href="faq.html" title="关于 Google Chrome 扩展程序常见问题的答案"><div>常见问题</div></a>
        </li>
        <li id="samples_link">
          <!--@<a href="samples.html" title="Sample 扩展程序 (with source code)"><div>Samples</div></a>-->
          <a href="samples.html" title="示例扩展程序（包含源代码）"><div>示例</div></a>
        </li>
        <li id="group_link">
          <!--<a href="http://groups.google.com/a/chromium.org/group/chromium-extensions" title="Google Chrome 扩展程序 developer forum"><div>Group</div></a>-->
          <a href="http://groups.google.com/a/chromium.org/group/chromium-extensions" title="Google Chrome 扩展程序开发人员论坛"><div>论坛（英文）</div></a>
        </li>
        <li id="so_link">
          <!--<a href="http://stackoverflow.com/questions/tagged/google-chrome-extension" title="[google-chrome-extension] tag on Stack Overflow"><div>Questions?</div></a>-->
          <a href="http://stackoverflow.com/questions/tagged/google-chrome-extension" title="Stack Overflow 上的 [google-chrome-extension] 标签"><div>问题？（英文）</div></a>
        </li>
      </ul>
    </div>
    <div id="gc-container">
      <div id="gc-sidebar">
        <ul 
            class="level1 ">
          <li class="level2">
                <a href="getstarted.html" class="level2 ">入门</a>
          </li>
          <li class="level2">
                <a href="overview.html" class="level2 ">概述</a>
          </li>
          <li class="level2">
                <a href="whats_new.html" class="level2 ">新增功能</a>
          </li>
          <li class="level2">
                <a href="devguide.html" class="level2 "></a>
              <ul 
                  class="level2 ">
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">浏览器用户界面</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="browserAction.html" class="level4 ">浏览器按钮</a>
                      </li>
                      <li class="level4">
                            <a href="contextMenus.html" class="level4 ">右键菜单</a>
                      </li>
                      <li class="level4">
                            <a href="notifications.html" class="level4 ">桌面通知</a>
                      </li>
                      <li class="level4">
                            <a href="omnibox.html" class="level4 ">多功能框</a>
                      </li>
                      <li class="level4">
                            <a href="options.html" class="level4 ">选项页面</a>
                      </li>
                      <li class="level4">
                            <a href="override.html" class="level4 ">替代页面</a>
                      </li>
                      <li class="level4">
                            <a href="pageAction.html" class="level4 ">页面按钮</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">浏览器交互</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="bookmarks.html" class="level4 ">书签</a>
                      </li>
                      <li class="level4">
                            <a href="cookies.html" class="level4 ">Cookie</a>
                      </li>
                      <li class="level4">
                            <a href="devtools.html" class="level4 ">开发人员工具</a>
                      </li>
                      <li class="level4">
                            <a href="events.html" class="level4 ">事件</a>
                      </li>
                      <li class="level4">
                            <a href="history.html" class="level4 ">历史记录</a>
                      </li>
                      <li class="level4">
                            <a href="management.html" class="level4 ">管理</a>
                      </li>
                      <li class="level4">
                            <a href="tabs.html" class="level4 ">标签页</a>
                      </li>
                      <li class="level4">
                            <a href="windows.html" class="level4 ">窗口</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">实现</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="a11y.html" class="level4 ">辅助功能</a>
                      </li>
                      <li class="level4">
                            <a href="event_pages.html" class="level4 ">事件页面</a>
                      </li>
                      <li class="level4">
                            <a href="contentSecurityPolicy.html" class="level4 ">内容安全策略</a>
                      </li>
                      <li class="level4">
                            <a href="content_scripts.html" class="level4 ">内容脚本</a>
                      </li>
                      <li class="level4">
                            <a href="xhr.html" class="level4 ">跨站XHR</a>
                      </li>
                      <li class="level4">
                            <a href="i18n.html" class="level4 ">国际化支持</a>
                      </li>
                      <li class="level4">
                            <a href="messaging.html" class="level4 ">消息传递</a>
                      </li>
                      <li class="level4">
                            <a href="permissions.html" class="level4 ">可选权限</a>
                      </li>
                      <li class="level4">
                            <a href="npapi.html" class="level4 ">NPAPI 插件</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">完成</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="hosting.html" class="level4 ">托管</a>
                      </li>
                      <li class="level4">
                            <a href="external_extensions.html" class="level4 ">其他发布选项</a>
                      </li>
                    </ul>
                </li>
              </ul>
          </li>
          <li class="level2">
                <a href="tutorials.html" class="level2 ">教程</a>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="tut_migration_to_manifest_v2.html" class="level3 ">清单文件版本2</a>
                </li>
                <li class="level3">
                      <a  class="level3 selected">调试</a>
                </li>
                <li class="level3">
                      <a href="tut_analytics.html" class="level3 ">Google Analytics（分析）</a>
                </li>
                <li class="level3">
                      <a href="tut_oauth.html" class="level3 ">OAuth</a>
                </li>
              </ul>
          </li>
          <li class="level2">
                <span class="level2">参考</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">格式</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="manifest.html" class="level4 ">清单文件</a>
                      </li>
                      <li class="level4">
                            <a href="match_patterns.html" class="level4 ">匹配表达式</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                      <a href="permission_warnings.html" class="level3 ">权限警告</a>
                </li>
                <li class="level3">
                      <a href="api_index.html" class="level3 ">chrome.* API</a>
                </li>
                <li class="level3">
                      <a href="api_other.html" class="level3 ">其他 API</a>
                </li>
              </ul>
          </li>
          <li class="level2">
                <span class="level2">更多</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="https://code.google.com/chrome/webstore/docs/index.html" class="level3 ">Chrome 网上应用店</a>
                </li>
                <li class="level3">
                      <a href="https://code.google.com/chrome/apps/docs/developers_guide.html" class="level3 ">托管应用程序</a>
                </li>
                <li class="level3">
                      <a href="themes.html" class="level3 ">主题背景</a>
                </li>
              </ul>
          </li>
        </ul>
      </div>
      <div id="gc-pagecontent">
        <h1 class="page_title">Tutorial: Debugging</h1>
        <div id="toc">
          <h2><!--@Contents-->目录</h2>
          <ol>
            <li>
              <a href=#extension-info> View extension information </a>
            </li>
            <li>
              <a href=#inspect-popup> Inspect the popup </a>
            </li>
            <li>
              <a href=#debug> Use the debugger </a>
            </li>
            <li>
              <a href=#summary>Summary</a>
            </li>
            <li>
              <a href=#next>Now what?</a>
            </li>
          </ol>
        </div>




<p>
This tutorial introduces you to using
Google Chrome's built-in Developer Tools
to interactively debug an extension.
</p>


<h2 id="extension-info"> View extension information </h2>

<p>
To follow this tutorial, you need
the Hello World extension that was featured in
<a href="getstarted.html">Getting Started</a>.
In this section,
you'll load the extension
and take a look at its information
in the Extensions page.
</p>

<ol>
  <li>
    <p>
      Load the Hello World extension if it isn't already running.
      If the extension is running,
      you'll see the Hello World icon
      <img src="examples/tutorials/getstarted/icon.png"
           width="19" height="19" alt=""
           style="margin:0" />
      to the right of
      your browser's address bar.
    </p>

    <p>
      If the Hello World extension isn't already running,
      find the extension files and load them.
      If you don't have a handy copy of the files,
      extract them from this
      <a href="examples/tutorials/getstarted.zip" download="getstarted.zip">ZIP file</a>.
      See Getting Started if you need
      <a href="getstarted.html#load-ext">instructions
      for loading the extension</a>.
    </p>
  </li>

  <li>
  Go to the Extensions page
  (<b>chrome://extensions</b>),
  and make sure the page is in Developer mode.
  </li>

  <li>
  Look at the Hello World extension's information on that page.
  You can see details such as the extension's
  name, description, and ID.
  </li>
</ol>

<h2 id="inspect-popup"> Inspect the popup </h2>

<p>
As long as your browser is in Developer mode, it's easy to inspect popups.
</p>

<ol>
  <li>
  Go to the Extensions page (<b>chrome://extensions</b>), and make sure Developer
  mode is still enabled. The Extensions page doesn't need to be open
  for the following to work. The browser remembers the setting,
  even when the page isn't shown.
  </li>
  <li>
  Right-click the Hello World icon
  <img src="examples/tutorials/getstarted/icon.png"
       width="19" height="19" alt=""
       style="margin:0" />
  and choose the <b>Inspect popup</b> menu item. The popup appears,
  and a Developer Tools window like the following should display the code
  for <b>popup.html</b>.

  <p>
     <img src="static/images/devtools-1.gif" alt=""
          width="500" height="294" />
     </p> 
  The popup remains open as long as the Developer Tools window does.  
  </li>
  <li>
  If the <strong>Scripts</strong> button isn't already selected,
  click it.
  
  </li>
  <li>
  Click the console button
  <img src="static/images/console-button.gif"
       style="margin:0; padding:0" align="absmiddle"
       width="26" height="22" alt="" />(second
  from left,
  at the bottom of the Developer Tools window)
  so that you can see both the code and the console.
  </li>
</ol>

<h2 id="debug"> Use the debugger </h2>

<p>
In this section,
you'll follow the execution of the popup page
as it adds images to itself.
</p>

<ol>
  <li>
  Set a breakpoint inside the image-adding loop
  by searching for the string <b>img.src</b>
  and clicking the number of the line where it occurs
  (for example, <strong>37</strong>):
  <p>
  <img src="static/images/devtools-2.gif" alt=""
       width="500" height="294" />
  </p>
  </li>

  <li>
  Make sure you can see the <b>popup.html</b> tab.
  It should show 20 "hello world" images.
  </li>

  <li>
  At the console prompt, reload the popup page
  by entering <b>location.reload(true)</b>:

<pre>
> <b>location.reload(true)</b>
</pre>

  <p>
  The popup page goes blank as it begins to reload,
  and its execution stops at line 37.
  </p>
  </li>

  <li>
  In the upper right part of the tools window,
  you should see the local scope variables.
  This section shows the current values of all variables in the current scope.
  For example, in the following screenshot
  the value of <code>i</code> is 0, and
  <code>photos</code> is a node list
  that contains at least a few elements.
  (In fact, it contains 20 elements at indexes 0 through 19,
  each one representing a photo.)

  <p>
  <img src="static/images/devtools-localvars.gif" alt=""
       width="225" height="215" />
  </p>
  </li>

  <li>
  Click the play/pause button
  <img src="static/images/play-button.gif"
       style="margin:0; padding:0" align="absmiddle"
       width="22" height="20" alt="" />(near
  the top right of the Developer Tools window)
  to go through the image-processing loop a single time.
  Each time you click that button,
  the value of <code>i</code> increments and
  another icon appears in the popup page.
  For example, when <code>i</code> is 10,
  the popup page looks something like this:
  </li>

  <p>
  <img src="static/images/devtools-3.gif"
       width="500" height="245"
       alt="the popup page with 10 images" />
  </p>

  <li>
  Use the buttons next to the play/pause button
  to step over, into, and out of function calls.
  To let the page finish loading,
  click line <b>37</b> to disable the breakpoint,
  and then press play/pause
  <img src="static/images/play-button.gif"
       style="margin:0; padding:0" align="absmiddle"
       width="22" height="20" alt="" />to
  continue execution.
  </li>

</ol>


<h2 id="summary">Summary</h2>

<p>
This tutorial demonstrated some techniques you can use
to debug your extensions:
</p>

<ul>
  <li>
    Find your extension's ID and links to its pages in
    the <b>Extensions</b> page
    (<b>chrome://extensions</b>).
  </li>
  <li>
    View hard-to-reach pages
    (and any other file in your extension) using
    <b>chrome-extension://</b><em>extensionId</em><b>/</b><em>filename</em>.
  </li>
  <li>
    Use Developer Tools to inspect
    and step through a page's JavaScript code.
  </li>
  <li>
    Reload the currently inspected page from the console
    using <b>location.reload(true)</b>.
  </li>
</ul>


<h2 id="next">Now what?</h2>

<p>
Now that you've been introduced to debugging,
here are suggestions for what to do next:
</p>

<ul>
  <li>
    Watch the extensions video
    <a href="http://www.youtube.com/watch?v=IP0nMv_NI1s&feature=PlayList&p=CA101D6A85FE9D4B&index=5">Developing and Debugging</a>.
  </li>
  <li>
    Try installing and inspecting other extensions,
    such as the
    <a href="samples.html">samples</a>.
  </li>
  <li>
    Try using widely available debugging APIs such as
    <code>console.log()</code> and <code>console.error()</code>
    in your extension's JavaScript code.
    Example: <code>console.log("Hello, world!")</code>
  </li>
  <li>
    Follow the <a href="http://www.chromium.org/devtools/google-chrome-developer-tools-tutorial">Developer Tools tutorial</a>,
    explore the
    <a href="http://www.chromium.org/devtools">Developer Tools site</a>,
    and watch some video tutorials.
  </li>
</ul>



<p>
For more ideas,
see the <a href="getstarted.html#summary">Now what?</a> section
of Getting Started.
</p>
      </div>
    </div>
  </body>
  <script>
    window.bootstrap = {
      api_names: [{"name":"alarms"},{"name":"bookmarks"},{"name":"browserAction"},{"name":"browsingData"},{"name":"commands"},{"name":"contentSettings"},{"name":"contextMenus"},{"name":"cookies"},{"name":"debugger"},{"name":"declarativeWebRequest"},{"name":"devtools.inspectedWindow"},{"name":"devtools.network"},{"name":"devtools.panels"},{"name":"downloads"},{"name":"events"},{"name":"extension"},{"name":"fileBrowserHandler"},{"name":"fontSettings"},{"name":"history"},{"name":"i18n"},{"name":"idle"},{"name":"input.ime"},{"name":"management"},{"name":"omnibox"},{"name":"pageAction"},{"name":"pageCapture"},{"name":"permissions"},{"name":"privacy"},{"name":"proxy"},{"name":"pushMessaging"},{"name":"runtime"},{"name":"scriptBadge"},{"name":"sessionRestore"},{"name":"storage"},{"name":"tabCapture"},{"name":"tabs"},{"name":"topSites"},{"name":"tts"},{"name":"ttsEngine"},{"name":"types"},{"name":"webNavigation"},{"name":"webRequest"},{"name":"webstore"},{"last":true,"name":"windows"}].concat(
          [{"name":"experimental.devtools.audits"},{"name":"experimental.devtools.console"},{"name":"experimental.discovery"},{"name":"experimental.history"},{"name":"experimental.identity"},{"name":"experimental.infobars"},{"name":"experimental.processes"},{"name":"experimental.record"},{"name":"experimental.speechInput"},{"name":"experimental.systemInfo.cpu"},{"last":true,"name":"experimental.systemInfo.storage"}]),
      branchInfo: {"channels":[{"path":"stable","name":"Stable"},{"path":"dev","name":"Dev"},{"path":"beta","name":"Beta"},{"path":"trunk","name":"Trunk"}],"current":"stable","showWarning":false}
    };
  </script>
  <div id="gc-footer">
    <div class="text">
      <p>
        <!--@Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
        the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
        Attribution 3.0 License</a>, and code samples are licensed under the
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.-->
        该页面翻译自
        <a href="https://developer.chrome.com/extensions/">Google Chrome Extensions</a>
        与
        <a href="https://developer.chrome.com/apps/">Google Chrome Apps</a>。除非特别<a href="https://code.google.com/policies.html#restrictions">说明</a>，该页面的内容遵循
        <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0
        License</a>，代码示例遵循
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>。
      </p>
      <p>
        <!--@©2012 Google-->
      </p>
      <script src="static/js/branch.js" type="text/javascript"></script>
      <script src="static/js/sidebar.js" type="text/javascript"></script>
      <script src="static/js/prettify.js" type="text/javascript"></script>
      <script>
        (function() {
          // Auto syntax highlight all pre tags.
          var preElements = document.getElementsByTagName('pre');
          for (var i = 0; i < preElements.length; i++)
            preElements[i].classList.add('prettyprint');
          prettyPrint();
        })();
      </script>
      <script src="https://www.google-analytics.com/urchin.js" type="text/javascript"></script>
      <script src="https://www.google-analytics.com/ga.js" type="text/javascript"></script>
      <script type="text/javascript">
        // chrome doc tracking
        try {
          var engdocs = _gat._getTracker("YT-10763712-2");
          engdocs._trackPageview();
        } catch(err) {}
        // code.google.com site-wide tracking
        try {
          _uacct="UA-18071-1";
          _uanchor=1;
          _uff=0;
          urchinTracker();
        }
        catch(e) {/* urchinTracker not available. */}
      </script>
      <script>
        (function() {
          var cx = '002967670403910741006:61_cvzfqtno';
          var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
          gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
        })();
      </script>
  
    </div>
  </div>
</html>

