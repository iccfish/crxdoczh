<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="/trunk/static/css/site.css" rel="stylesheet" type="text/css">
    <link href="/trunk/static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="/trunk/static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href="//www.google.com/images/icons/product/chrome-16.png" rel="icon" type="image/ico">
    <link href="/trunk/static/css/api.css" rel="stylesheet" type="text/css">
    <title>chrome.proxy - Google Chrome 扩展程序/应用开发者文档（非官方中文版）</title>
  </head>
  <body>
    <div id="branchWarning" class="displayModeWarning">
      <span><!--@WARNING: this is the trunk documentation. It may not work with the stable release of Chrome.-->警告：这是 trunk 分支的文档，不一定能在稳定版本的 Chrome 浏览器中正常工作。</span>
      <select id="branchChooser">
        <option value=""><!--@Choose a different version...-->选择另一个版本...</option>
        <option value="stable">Stable</option>
        <option value="dev">Dev</option>
        <option value="beta">Beta</option>
        <option value="trunk">Trunk</option>
      </select>
    </div>
    <a id="top"></a>
    <div id="header">
      <span id="logo">
        <a href="http://code.google.com/" id="view-original"><img src="/trunk/static/images/chrome_logo.gif" alt="单击此处查看英文原文"></a>
        <script type="text/javascript">
          document.getElementById('view-original').href = "https://developer.chrome.com" + location.pathname;
        </script>
      </span>
      <span id="cse">
        <gcse:searchbox-only enableAutoComplete="true" autoCompleteMatchTyple="prefix"></gcse:searchbox-only>
      </span>
    </div>
    <a id="gc-topnav-anchor"></a>
    <div id="gc-topnav">
      <h1>Google Chrome 扩展程序（非官方中文版）</h1>
      <ul id="home" class="gc-topnav-tabs">
        <li id="home_link">
          <!--@<a href="index.html" title="Google Chrome 扩展程序 home page"><div>Home</div></a>-->
          <a href="index.html" title="Google Chrome 扩展程序主页"><div>主页</div></a>
        </li>
        <li id="docs_link">
          <!--@<a href="docs.html" title="Official Google Chrome 扩展程序 documentation"><div>Docs</div></a>-->
          <a href="docs.html" title="Google Chrome 扩展程序文档"><div>文档</div></a>
        </li>
        <li id="faq_link">
          <!--@<a href="faq.html" title="Answers to frequently asked questions about Google Chrome 扩展程序"><div>FAQ</div></a>-->
          <a href="faq.html" title="关于 Google Chrome 扩展程序常见问题的答案"><div>常见问题</div></a>
        </li>
        <li id="samples_link">
          <!--@<a href="samples.html" title="Sample 扩展程序 (with source code)"><div>Samples</div></a>-->
          <a href="samples.html" title="示例扩展程序（包含源代码）"><div>示例</div></a>
        </li>
        <li id="group_link">
          <!--<a href="http://groups.google.com/a/chromium.org/group/chromium-extensions" title="Google Chrome 扩展程序 developer forum"><div>Group</div></a>-->
          <a href="http://groups.google.com/a/chromium.org/group/chromium-extensions" title="Google Chrome 扩展程序开发人员论坛"><div>论坛（英文）</div></a>
        </li>
        <li id="so_link">
          <!--<a href="http://stackoverflow.com/questions/tagged/google-chrome-extension" title="[google-chrome-extension] tag on Stack Overflow"><div>Questions?</div></a>-->
          <a href="http://stackoverflow.com/questions/tagged/google-chrome-extension" title="Stack Overflow 上的 [google-chrome-extension] 标签"><div>问题？（英文）</div></a>
        </li>
      </ul>
    </div>
    <div id="gc-container">
      <div id="gc-sidebar">
        <ul 
            class="level1 ">
          <li class="level2">
                <a href="getstarted.html" class="level2 ">入门</a>
          </li>
          <li class="level2">
                <a href="overview.html" class="level2 ">概述</a>
          </li>
          <li class="level2">
                <a href="whats_new.html" class="level2 ">新增功能</a>
          </li>
          <li class="level2">
                <a href="devguide.html" class="level2 ">开发者指南</a>
              <ul 
                  class="level2 ">
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">浏览器用户界面</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="browserAction.html" class="level4 ">浏览器按钮</a>
                      </li>
                      <li class="level4">
                            <a href="contextMenus.html" class="level4 ">右键菜单</a>
                      </li>
                      <li class="level4">
                            <a href="notifications.html" class="level4 ">桌面通知</a>
                      </li>
                      <li class="level4">
                            <a href="omnibox.html" class="level4 ">多功能框</a>
                      </li>
                      <li class="level4">
                            <a href="options.html" class="level4 ">选项页面</a>
                      </li>
                      <li class="level4">
                            <a href="override.html" class="level4 ">替代页面</a>
                      </li>
                      <li class="level4">
                            <a href="pageAction.html" class="level4 ">页面按钮</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">浏览器交互</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="bookmarks.html" class="level4 ">书签</a>
                      </li>
                      <li class="level4">
                            <a href="cookies.html" class="level4 ">Cookie</a>
                      </li>
                      <li class="level4">
                            <a href="devtools.html" class="level4 ">开发者工具</a>
                      </li>
                      <li class="level4">
                            <a href="events.html" class="level4 ">事件</a>
                      </li>
                      <li class="level4">
                            <a href="history.html" class="level4 ">历史记录</a>
                      </li>
                      <li class="level4">
                            <a href="management.html" class="level4 ">管理</a>
                      </li>
                      <li class="level4">
                            <a href="tabs.html" class="level4 ">标签页</a>
                      </li>
                      <li class="level4">
                            <a href="windows.html" class="level4 ">窗口</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">实现</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="a11y.html" class="level4 ">辅助功能</a>
                      </li>
                      <li class="level4">
                            <a href="event_pages.html" class="level4 ">事件页面</a>
                      </li>
                      <li class="level4">
                            <a href="contentSecurityPolicy.html" class="level4 ">内容安全策略</a>
                      </li>
                      <li class="level4">
                            <a href="content_scripts.html" class="level4 ">内容脚本</a>
                      </li>
                      <li class="level4">
                            <a href="xhr.html" class="level4 ">跨站 XHR</a>
                      </li>
                      <li class="level4">
                            <a href="i18n.html" class="level4 ">国际化支持</a>
                      </li>
                      <li class="level4">
                            <a href="messaging.html" class="level4 ">消息传递</a>
                      </li>
                      <li class="level4">
                            <a href="permissions.html" class="level4 ">可选权限</a>
                      </li>
                      <li class="level4">
                            <a href="npapi.html" class="level4 ">NPAPI 插件</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">完成</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="hosting.html" class="level4 ">托管</a>
                      </li>
                      <li class="level4">
                            <a href="external_extensions.html" class="level4 ">其他发布选项</a>
                      </li>
                    </ul>
                </li>
              </ul>
          </li>
          <li class="level2">
                <a href="tutorials.html" class="level2 ">教程</a>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="tut_migration_to_manifest_v2.html" class="level3 ">清单文件版本2</a>
                </li>
                <li class="level3">
                      <a href="tut_debugging.html" class="level3 ">调试</a>
                </li>
                <li class="level3">
                      <a href="tut_analytics.html" class="level3 ">Google Analytics（分析）</a>
                </li>
                <li class="level3">
                      <a href="tut_oauth.html" class="level3 ">OAuth</a>
                </li>
              </ul>
          </li>
          <li class="level2">
                <span class="level2">参考</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">格式</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="manifest.html" class="level4 ">清单文件</a>
                      </li>
                      <li class="level4">
                            <a href="match_patterns.html" class="level4 ">匹配表达式</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                      <a href="permission_warnings.html" class="level3 ">权限警告</a>
                </li>
                <li class="level3">
                      <a href="api_index.html" class="level3 ">chrome.* API</a>
                </li>
                <li class="level3">
                      <a href="api_other.html" class="level3 ">其他 API</a>
                </li>
              </ul>
          </li>
          <li class="level2">
                <span class="level2">更多</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="https://code.google.com/chrome/webstore/docs/index.html" class="level3 ">Chrome 网上应用店</a>
                </li>
                <li class="level3">
                      <a href="https://code.google.com/chrome/apps/docs/developers_guide.html" class="level3 ">托管应用</a>
                </li>
                <li class="level3">
                      <a href="themes.html" class="level3 ">主题背景</a>
                </li>
              </ul>
          </li>
        </ul>
      </div>
      <div id="gc-pagecontent">
        <h1 class="page_title">chrome.proxy</h1>
        
        
        
        <div id="toc">
          <h2><!--@Contents-->目录</h2>
          <ol>
            <li>
              <a href=#manifest>清单文件</a>
            </li>
            <li>
              <a href=#description>对象和属性</a>
              <ol>
                <li><a href=#proxy_modes>代理服务器模式</a></li><li><a href=#proxy_rules>代理服务器规则</a></li><li><a href=#proxy_server_objects>代理服务器对象</a></li><li><a href=#bypass_list>例外列表</a></li>
              </ol>
            </li>
            <li>
              <a href=#overview-examples>例子</a>
            </li>
            <li>
              <a href="#apiReference"><!--@API reference: -->API 参考：chrome.proxy</a>
              <ol>
                  <li><a href="#types"><!--@Types-->类型</a><ol>  <li>    <a href="#type-ProxyServer">ProxyServer</a>  </li>  <li>    <a href="#type-ProxyRules">ProxyRules</a>  </li>  <li>    <a href="#type-PacScript">PacScript</a>  </li>  <li>    <a href="#type-ProxyConfig">ProxyConfig</a>  </li></ol></li>
                  <li><a href="#properties"><!--@Properties-->属性</a><ol>  <li>    <a href="#property-settings">settings</a>  </li></ol></li>
                  
                  <li><a href="#events"><!--@Events-->事件</a><ol>  <li><a href="#event-onProxyError">onProxyError</a></li></ol></li>
                  
              </ol>
            </li>
          </ol>
        </div>

<p id="classSummary">
<!--@Use the-->使用 <code>chrome.proxy</code> <!--@module to manage Chrome's
proxy settings. This module relies on the <a href="types.html#ChromeSetting">
ChromeSetting prototype of the type API</a> for getting and setting the proxy
configuration.-->
模块管理 Chrome 浏览器的代理服务器设置。该模块依赖<a
href="types.html#ChromeSetting">类型 API 中的 ChromeSetting
原型</a>，用于获取和设置代理服务器配置。
</p>

<h2 id="manifest"><!--@Manifest-->清单文件</h2>
<p><!--@You must declare the "proxy" permission
in the <a href="manifest.html">extension manifest</a>
to use the proxy settings API.
For example:-->
您必须在<a href="manifest.html">扩展程序的清单文件</a>中声明
"proxy"（代理服务器）权限来使用代理服务器设置 API。例如：
</p>
<pre>{
  "name": "我的扩展程序",
  ...
  <b>"permissions": [
    "proxy"
  ]</b>,
  ...
}</pre>

<h2 id="description"><!--@Objects and properties-->对象和属性</h2>

<p>
<!--@Proxy settings are defined in a
<a href="proxy.html#type-ProxyConfig">ProxyConfig</a> object. Depending on
Chrome's proxy settings, the settings may contain
<a href="proxy.html#type-ProxyRules">ProxyRules</a> or a 
  <a href="proxy.html#type-PacScript">PacScript</a>.-->
代理服务器设置定义在 <a href="proxy.html#type-ProxyConfig">ProxyConfig</a> 对象中。取决于 Chrome
浏览器的代理服务器设置，设置可以包含 <a href="proxy.html#type-ProxyRules">ProxyRules</a> 对象或者一个
<a href="proxy.html#type-PacScript">PacScript</a> 对象。
</p>

<h3 id="proxy_modes"><!--@Proxy modes-->代理服务器模式</h3>

<p>
<!--@A ProxyConfig object's <code>mode</code> attribute determines the overall
behavior of Chrome with regards to proxy usage. It can take the following
values:-->
ProxyConfig 对象的 <code>mode</code> 属性决定 Chrome
浏览器使用代理服务器的整体行为。它可以为以下值：
<dl>
  <dt><code>direct</code></dt>
  <dd><!--@In <code>direct</code> mode all connections are created directly, without
  any proxy involved. This mode allows no further parameters in the
  <code>ProxyConfig</code> object.-->
  在 <code>direct</code>
  模式下所有连接都直接建立，不涉及任何代理服务器。使用这一模式时不允许
  <code>ProxyConfig</code> 对象中包含其他任何参数。
  </dd>

  <dt><code>auto_detect</code></dt>
  <dd><!--@In <code>auto_detect</code> mode the proxy configuration is determined by
  a PAC script that can be downloaded at
  <a href="http://wpad/wpad.dat">http://wpad/wpad.dat</a>.
  This mode allows no further parameters in the <code>ProxyConfig</code>
  object.-->
  在 <code>auto_detect</code> 模式下，代理服务器配置通过下载自
  <a href="http://wpad/wpad.dat">http://wpad/wpad.dat</a>
  的一个 PAC 脚本确定。使用这一模式时不允许 <code>ProxyConfig</code>
  对象中包含其他任何参数。
  </dd>

  <dt><code>pac_script</code></dt>
  <dd><!--@In <code>pac_script</code> mode the proxy configuration is determined by
  a PAC script that is either retrieved from the URL specified in the
  <a href="proxy.html#type-PacScript">PacScript</a> object or
  taken literally from the <code>data</code> element specified in the
  <a href="proxy.html#type-PacScript">PacScript</a> object.
  Besides this, this mode allows no further parameters in the
  <code>ProxyConfig</code> object.-->
  在 <code>pac_script</code> 模式下代理服务器配置由一个 PAC
  脚本确定，它既可以从 <a href="proxy.html#type-PacScript">PacScript</a> 对象中指定的 URL
  获取，也可以直接来自 <a href="proxy.html#type-PacScript">PacScript</a> 对象中的 <code>data</code>
  属性。除此之外，使用该模式时不允许 <code>ProxyConfig</code>
  对象中包含其他任何参数。
  </dd>

  <dt><code>fixed_servers</code></dt>
  <dd><!--@In <code>fixed_servers</code> mode the proxy configuration is codified in
  a <a href="proxy.html#type-ProxyRules">ProxyRules</a>
  object. Its structure is described in <a href="#proxy_rules">Proxy rules</a>.
  Besides this, the <code>fixed_servers</code> mode allows no further parameters
  in the <code>ProxyConfig</code> object.-->
  在 <code>fixed_servers</code> 模式下代理服务器配置通过一个
  <a href="proxy.html#type-ProxyRules">ProxyRules</a>
  对象指定。它的结构将在<a href="#proxy_rules"
  >代理服务器</a>规则部分描述。除此之外，<code>fixed_servers</code>
  模式时不允许 <code>ProxyConfig</code> 对象中包含其他任何参数。
  </dd>

  <dt><code>system</code></dt>
  <dd><!--@In <code>system</code> mode the proxy configuration is taken from the
  operating system. This mode allows no further parameters in the
  <code>ProxyConfig</code> object. Note that the <code>system</code> mode is
  different from setting no proxy configuration. In the latter case, Chrome
  falls back to the system settings only if no command-line options influence
  the proxy configuration.-->
  在 <code>system</code>
  模式下代理服务器配置直接从操作系统获取，使用这一模式时不允许
  <code>ProxyConfig</code> 对象中包含其他任何参数。注意 <code>system</code>
  模式与不设置代理服务器配置不同，在后一种情况下，Chrome
  浏览器只有在没有任何命令行选项影响代理服务器配置的情况下才会使用系统设置。
  </dd>
</dl>
</p>

<h3 id="proxy_rules"><!--@Proxy rules-->代理服务器规则</h3>

<p>
<!--@The--> <a href="proxy.html#type-ProxyRules">ProxyRules</a> <!--@object can contain
either a <code>singleProxy</code> attribute or a subset of
<code>proxyForHttp</code>, <code>proxyForHttps</code>, <code>proxyForFtp</code>,
and <code>fallbackProxy</code>.-->
对象可以包含一个 <code>singleProxy</code> 属性或者
<code>proxyForHttp</code>、<code>proxyForHttps</code>、<code>proxyForFtp</code>
或 <code>fallbackProxy</code> 这些属性中的一个子集。
</p>

<p>
<!--@In the first case, HTTP, HTTPS and FTP traffic is proxied through the specified
proxy server. Other traffic is sent directly. In the latter case the behavior is
slightly more subtle: If a proxy server is configured for the HTTP, HTTPS or FTP
protocol, the respective traffic is proxied through the specified server. If no
such proxy server is specified or traffic uses a different protocol than HTTP,
HTTPS or FTP, the <code>fallbackProxy</code> is used. If no
<code>fallbackProxy</code> is specified, traffic is sent directly without a
proxy server.-->
在第一种情况下，HTTP、HTTPS 和 FTP
流量都将通过指定的代理服务器，其它流量直接发送。在后一种情况下行为稍微复杂一些：如果分别为
HTTP、HTTPS 或 FTP
协议配置了代理服务器，则相应的流量通过指定的服务器代理。如果没有指定相应的代理服务器或者流量使用了
HTTP、HTTPS 或 FTP 之外的另一种协议，则使用
<code>fallbackProxy</code>。如果没有指定
<code>fallbackProxy</code>，将直接发送，不通过代理服务器。
</p>

<h3 id="proxy_server_objects"><!--@Proxy server objects-->代理服务器对象</h3>

<p>
<!--@A proxy server is configured in a
<a href="proxy.html#type-ProxyServer">ProxyServer</a> object. The connection
to the proxy server (defined by the <code>host</code> attribute) uses the
protocol defined in the <code>scheme</code> attribute. If no <code>scheme</code>
is specified, the proxy connection defaults to <code>http</code>.-->
代理服务器在 <a href="proxy.html#type-ProxyServer">ProxyServer</a> 对象中配置。连接到代理服务器（由
<code>host</code> 属性定义）时使用定义在 <code>scheme</code>
属性中的协议。如果没有指定 <code>scheme</code>，代理服务器连接默认使用
<code>http</code>。
</p>

<p>
<!--@If no <code>port</code> is defined in a
<a href="proxy.html#type-ProxyServer">ProxyServer</a> object, the port is
derived from the scheme. The default ports are:-->
如果 <a href="proxy.html#type-ProxyServer">ProxyServer</a> 对象中没有定义 <code>port</code>
属性，端口将使用协议的默认值。默认端口分别为：
<table>
  <tr><th><!--@Scheme-->协议</th><th><!--@Port-->端口</th></tr>
  <tr><td>http</td><td>80</td></tr>
  <tr><td>https</td><td>443</td></tr>
  <tr><td>socks4</td><td>1080</td></tr>
  <tr><td>socks5</td><td>1080</td></tr>
</table>
</p>

<h3 id="bypass_list"><!--@Bypass list-->例外列表</h3>

<p>
<!--@Individual servers may be excluded from being proxied with the
<code>bypassList</code>. This list may contain the following entries:-->
个别的服务器可以通过 <code>bypassList</code>
属性排除在代理服务器之外。这一列表可以包含如下条目：
<dl>
  <dt><code>[<em>&lt;scheme&gt;</em>://]<em>&lt;host-pattern&gt;</em>[:<em>&lt;port&gt;</em>]</code></dt>
  <dd><!--@Match all hostnames that match the pattern <em>&lt;host-pattern&gt;</em>.
  A leading <code>"."</code> is interpreted as a <code>"*."</code>.-->
  匹配所有符合 <em>&lt;host-pattern&gt;</em>
  表达式的主机名，前导的“<code>.</code>”将被视为“<code>*.</code>”。
  <br>
  <!--@Examples: -->例如：<code>"foobar.com", "*foobar.com", "*.foobar.com", "*foobar.com:99",
    "https://x.*.y.com:99"</code>.<br>
  <table>
    <tr>
      <th><!--@Pattern-->表达式
      <th><!--@Matches-->匹配的域名
      <th><!--@Does not match-->不匹配的域名
    <tr>
      <td><code>".foobar.com"</code>
      <td><code>"www.foobar.com"</code>
      <td><code>"foobar.com"</code>
    <tr>
      <td><code>"*.foobar.com"</code>
      <td><code>"www.foobar.com"</code>
      <td><code>"foobar.com"</code>
    <tr>
      <td><code>"foobar.com"</code>
      <td><code>"foobar.com"</code>
      <td><code>"www.foobar.com"</code>
    <tr>
      <td><code>"*foobar.com"</code>
      <td><code>"foobar.com"</code>, <code>"www.foobar.com"</code>,
          <code>"foofoobar.com"</code>
      <td>
  </table>
  </dd>

  <dt><code>[<em>&lt;scheme&gt;</em>://]<em>&lt;ip-literal&gt;</em>[:<em>&lt;port&gt;</em>]</code></dt>
  <dd><!--@Match URLs that are IP address literals.-->
  匹配包含字面 IP 地址的 URL。
  <br>
  <!--@Conceptually this is the similar to the first case, but with special cases
  to handle IP literal canonicalization. For example, matching
  on "[0:0:0::1]" is the same as matching on "[::1]" because
  the IPv6 canonicalization is done internally.-->
  概念上这和第一种情况相似，但是特别之处在于它会处理 IP
  地址规范化的情况。例如匹配"[0:0:0::1]"与匹配"[::1]"是相同的，因为在内部会自动进行
  IPv6 规范化。
  <br>
  <!--@Examples: -->例如：<code>"127.0.1", "[0:0::1]", "[::1]", "http://[::1]:99"</code></dd>

  <dt><code><em>&lt;ip-literal&gt;</em>/<em>&lt;prefix-length-in-bits&gt;</em></code></dt>
  <dd><!--@Match any URL containing an IP literal within the given range. The IP
  range is specified using CIDR notation.-->
  匹配包含指定范围内 IP 地址的任何 URL，IP 范围使用 <a
  href="https://en.wikipedia.org/wiki/CIDR_notation">CIDR 记号</a>表示。
  <br>
  <!--@Examples: -->例如：<code>"192.168.1.1/16", "fefe:13::abc/33"</code></dd>

  <dt><code>&lt;local&gt;</code></dt>
  <dd><!--@Match local addresses. An address is local if the host is "127.0.0.1",
  "::1", or "localhost".-->
  匹配本机地址。本机地址包括主机为 "127.0.0.1"、"::1"或 "localhost" 的地址。
  <br>
  <!--@Example: -->例如：<code>"&lt;local&gt;"</code></dd>
</dl>


<h2 id="overview-examples"><!--@Examples-->例子</h2>

<p>
<!--@The following code sets a SOCKS 5 proxy for HTTP connections to all servers but
foobar.com and uses direct connections for all other protocols. The settings
apply to regular and incognito windows, as incognito windows inherit settings
from regular windows. Please also consult the <a
  href="types.html#ChromeSetting">Types API</a> documentation.-->
以下代码为除了 foobar.com 以外的所有 HTTP 连接设置 SOCKS 5
代理，并为所有其他协议使用直接连接。这些设置应用于普通窗口和隐身窗口，因为隐身窗口从普通窗口继承设置。同时请参见<a
href="types.html#ChromeSetting">类型 API</a> 文档。
</p>

<pre>
var config = {
  mode: "fixed_servers",
  rules: {
    proxyForHttp: {
      scheme: "socks5",
      host: "1.2.3.4"
    },
    bypassList: ["foobar.com"]
  }
};
chrome.proxy.settings.set(
    {value: config, scope: 'regular'},
    function() {});
</pre>

<p>
<!--@The following code sets a custom PAC script.-->
如下代码设置一个自定义 PAC 脚本。
</p>

<pre>
var config = {
  mode: "pac_script",
  pacScript: {
    data: "function FindProxyForURL(url, host) {\n" +
          "  if (host == 'foobar.com')\n" +
          "    return 'PROXY blackhole:80';\n" +
          "  return 'DIRECT';\n" +
          "}"
  }
};
chrome.proxy.settings.set(
    {value: config, scope: 'regular'},
    function() {});
</pre>

<p>
<!--@The next snippet queries the currently effective proxy settings. The effective
proxy settings can be determined by another extension or by a policy. See the <a
  href="types.html#ChromeSetting">Types API</a> documentation for details.-->
下一个代码片段查询当前有效的代理服务器设置，有效代理服务器设置可以由另一个扩展程序或者其他策略确定。有关细节请参见<a
href="types.html#ChromeSetting">类型 API</a>。
</p>

<pre>
chrome.proxy.settings.get(
    {'incognito': false},
    function(config) {console.log(JSON.stringify(config));});
</pre>

<p>
<!--@Note that the <code>value</code> object passed to <code>set()</code> is not
identical to the <code>value</code> object passed to callback function of
<code>get()</code>. The latter will contain a
<code>rules.proxyForHttp.port</code> element.-->
注意，传递给 <code>set()</code> 的 <code>value</code> 对象与传递给
<code>get()</code> 的回调函数的 <code>value</code> 对象不同，后者会包含
<code>rules.httpProxy.port</code> 元素。
</p>
        <h2 id="apiReference"><!--@API Reference: chrome.proxy-->API 参考：chrome.proxy</h2>
        <div class="api_reference">
            <h3 id="types"><!--@Types-->类型</h3>
              <div>
                <h3 id="type-ProxyServer">ProxyServer</h3>
                <div>
                  <dt><span class="type_name">  (    object  )</span></dt>
              <dd>
                    包含单个代理服务器信息的对象。
                  </dd>    <h4 id="ProxyServer-properties">
                    <!--@Properties of --><a href="#type-ProxyServer">ProxyServer</a>
                    的属性
                  </h4>
                  <dd><dl>      <div>
                      <a name="property-ProxyServer-scheme"></a>
                      <dt>
                        <span class="variable">scheme</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            enumerated string ["http", "https", "socks4", "socks5"]
                          )
                        </span>
                      </dt>
                      <dd>
                        代理服务器自己的协议，默认为 "http"。
                      </dd>
                    </div>
                    <div>
                      <a name="property-ProxyServer-host"></a>
                      <dt>
                        <span class="variable">host</span>
                        <span class="property">
                          (
                            
                            string
                          )
                        </span>
                      </dt>
                      <dd>
                        代理服务器的 URL，必须为 ASCII 主机名（以 <a href="https://en.wikipedia.org/wiki/Punycode">Punycode</a> 的格式），暂时还不支持 IDNA。
                      </dd>
                    </div>
                    <div>
                      <a name="property-ProxyServer-port"></a>
                      <dt>
                        <span class="variable">port</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            integer
                          )
                        </span>
                      </dt>
                      <dd>
                        代理服务器的端口，默认值与协议相关。
                      </dd>
                    </div>
              </dl></dd>
                </div>
              </div>
              <div>
                <h3 id="type-ProxyRules">ProxyRules</h3>
                <div>
                  <dt><span class="type_name">  (    object  )</span></dt>
              <dd>
                    包含用于所有协议的代理规则的对象。仅使用 "singleProxy" 属性或者使用以下属性（及其子集）："proxyForHttp"、"proxyForHttps"、"proxyForFtp" 和 "fallbackProxy"。
                  </dd>    <h4 id="ProxyRules-properties">
                    <!--@Properties of --><a href="#type-ProxyRules">ProxyRules</a>
                    的属性
                  </h4>
                  <dd><dl>      <div>
                      <a name="property-ProxyRules-singleProxy"></a>
                      <dt>
                        <span class="variable">singleProxy</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            <a href="proxy.html#type-ProxyServer">ProxyServer</a>
                          )
                        </span>
                      </dt>
                      <dd>
                        用于所有 URL 请求（即 HTTP、HTTPS 和 FTP）的代理服务器。
                      </dd>
                    </div>
                    <div>
                      <a name="property-ProxyRules-proxyForHttp"></a>
                      <dt>
                        <span class="variable">proxyForHttp</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            <a href="proxy.html#type-ProxyServer">ProxyServer</a>
                          )
                        </span>
                      </dt>
                      <dd>
                        用于 HTTP 请求的代理服务器。
                      </dd>
                    </div>
                    <div>
                      <a name="property-ProxyRules-proxyForHttps"></a>
                      <dt>
                        <span class="variable">proxyForHttps</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            <a href="proxy.html#type-ProxyServer">ProxyServer</a>
                          )
                        </span>
                      </dt>
                      <dd>
                        用于 HTTPS 请求的代理服务器。
                      </dd>
                    </div>
                    <div>
                      <a name="property-ProxyRules-proxyForFtp"></a>
                      <dt>
                        <span class="variable">proxyForFtp</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            <a href="proxy.html#type-ProxyServer">ProxyServer</a>
                          )
                        </span>
                      </dt>
                      <dd>
                        用于 FTP 请求的代理服务器。
                      </dd>
                    </div>
                    <div>
                      <a name="property-ProxyRules-fallbackProxy"></a>
                      <dt>
                        <span class="variable">fallbackProxy</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            <a href="proxy.html#type-ProxyServer">ProxyServer</a>
                          )
                        </span>
                      </dt>
                      <dd>
                        用于其他协议或者未指定 proxyFor... 的协议的代理服务器。
                      </dd>
                    </div>
                    <div>
                      <a name="property-ProxyRules-bypassList"></a>
                      <dt>
                        <span class="variable">bypassList</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            array of string
                          )
                        </span>
                      </dt>
                      <dd>
                        不通过代理服务器连接的服务器列表。
                      </dd>
                    </div>
              </dl></dd>
                </div>
              </div>
              <div>
                <h3 id="type-PacScript">PacScript</h3>
                <div>
                  <dt><span class="type_name">  (    object  )</span></dt>
              <dd>
                    包含代理自动配置信息的对象。以下前两个属性中有且只有一个非空。
                  </dd>    <h4 id="PacScript-properties">
                    <!--@Properties of --><a href="#type-PacScript">PacScript</a>
                    的属性
                  </h4>
                  <dd><dl>      <div>
                      <a name="property-PacScript-url"></a>
                      <dt>
                        <span class="variable">url</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            string
                          )
                        </span>
                      </dt>
                      <dd>
                        要使用的 PAC 文件 URL。
                      </dd>
                    </div>
                    <div>
                      <a name="property-PacScript-data"></a>
                      <dt>
                        <span class="variable">data</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            string
                          )
                        </span>
                      </dt>
                      <dd>
                        PAC 脚本内容。
                      </dd>
                    </div>
                    <div>
                      <a name="property-PacScript-mandatory"></a>
                      <dt>
                        <span class="variable">mandatory</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            boolean
                          )
                        </span>
                      </dt>
                      <dd>
                        如果为 true，无效的 PAC 脚本将不会使网络栈回退到直接连接方式。默认为 false。
                      </dd>
                    </div>
              </dl></dd>
                </div>
              </div>
              <div>
                <h3 id="type-ProxyConfig">ProxyConfig</h3>
                <div>
                  <dt><span class="type_name">  (    object  )</span></dt>
              <dd>
                    包含完整代理配置的对象。
                  </dd>    <h4 id="ProxyConfig-properties">
                    <!--@Properties of --><a href="#type-ProxyConfig">ProxyConfig</a>
                    的属性
                  </h4>
                  <dd><dl>      <div>
                      <a name="property-ProxyConfig-rules"></a>
                      <dt>
                        <span class="variable">rules</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            <a href="proxy.html#type-ProxyRules">ProxyRules</a>
                          )
                        </span>
                      </dt>
                      <dd>
                        描述该配置的代理规则。请在 "fixed_servers" 模式下使用该属性。
                      </dd>
                    </div>
                    <div>
                      <a name="property-ProxyConfig-pacScript"></a>
                      <dt>
                        <span class="variable">pacScript</span>
                        <span class="property">
                          (
                            <span class="optional">optional</span>
                            <a href="proxy.html#type-PacScript">PacScript</a>
                          )
                        </span>
                      </dt>
                      <dd>
                        该配置下的代理服务器自动配置（PAC）脚本。请在 "pac_script" 模式下使用该属性。
                      </dd>
                    </div>
                    <div>
                      <a name="property-ProxyConfig-mode"></a>
                      <dt>
                        <span class="variable">mode</span>
                        <span class="property">
                          (
                            
                            enumerated string ["direct", "auto_detect", "pac_script", "fixed_servers", "system"]
                          )
                        </span>
                      </dt>
                      <dd>
                        "direct" = 永远不使用代理服务器<br>"auto_detect" = 自动检测代理服务器设置<br>"pac_script" = 使用指定的 PAC 脚本<br>"fixed_servers" = 手动指定代理服务器<br>"system" = 使用系统的代理服务器设置
                      </dd>
                    </div>
              </dl></dd>
                </div>
              </div>
            <h3 id="properties"><!--@Properties-->属性</h3>
              <div>
                <h3 id="property-settings">settings</h3>
                <div class="summary">
                  <span><span class="subdued">chrome.proxy.</span>settings</span>
                </div>
                <div>
                  <dt><span class="property">settings</span> <span class="type_name">  (    <a href="types.html#type-ChromeSetting">types.ChromeSetting</a>  )</span></dt>
              <dd>
                    使用的代理服务器设置，这一设置的值是一个 ProxyConfig 对象。
                  </dd>  </div>
              </div>
            <h3 id="events"><!--@Events-->事件</h3>
              <div>
                <h4 id="event-onProxyError">onProxyError</h4>
                <div class="summary">
                  <span class="subdued">chrome.proxy.</span>onProxyError<span class="subdued">.addListener</span>(function(<span>object <span class="variable">details</span></span>)<span class="subdued"> {...}</span>);
                </div>
                <div class="description">
              <p>
                    通知代理服务器错误。
                  </p>      <h4><!--@Listener Parameters-->监听器参数</h4>
                    <dl>
                      <div>  <a name="property-onProxyError-details"></a>  <dt>    <span class="variable">details</span>    <span class="property">      (                object      )    </span>  </dt>  <dd>    <dl>      <div>        <a name="property-details-fatal"></a>        <dt>          <span class="variable">fatal</span>          <span class="property">            (                            boolean            )          </span>        </dt>        <dd>          如果为 true，该错误是致命的，网络连接将终止。否则，将改用直接连接。        </dd>      </div>      <div>        <a name="property-details-error"></a>        <dt>          <span class="variable">error</span>          <span class="property">            (                            string            )          </span>        </dt>        <dd>          错误描述。        </dd>      </div>      <div>        <a name="property-details-details"></a>        <dt>          <span class="variable">details</span>          <span class="property">            (                            string            )          </span>        </dt>        <dd>          有关错误的其他详情，例如 JavaScript 运行时错误。        </dd>      </div>    </dl>  </dd></div>
                    </dl>
                </div>
              </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    window.bootstrap = {
      api_names: [{"name":"alarms"},{"name":"bookmarks"},{"name":"browserAction"},{"name":"browsingData"},{"name":"commands"},{"name":"contentSettings"},{"name":"contextMenus"},{"name":"cookies"},{"name":"debugger"},{"name":"declarativeContent"},{"name":"declarativeWebRequest"},{"name":"devtools.inspectedWindow"},{"name":"devtools.network"},{"name":"devtools.panels"},{"name":"downloads"},{"name":"events"},{"name":"extension"},{"name":"fileBrowserHandler"},{"name":"fontSettings"},{"name":"history"},{"name":"i18n"},{"name":"idle"},{"name":"input.ime"},{"name":"management"},{"name":"omnibox"},{"name":"pageAction"},{"name":"pageCapture"},{"name":"permissions"},{"name":"privacy"},{"name":"proxy"},{"name":"pushMessaging"},{"name":"runtime"},{"name":"scriptBadge"},{"name":"sessionRestore"},{"name":"storage"},{"name":"tabCapture"},{"name":"tabs"},{"name":"topSites"},{"name":"tts"},{"name":"ttsEngine"},{"name":"types"},{"name":"webNavigation"},{"name":"webRequest"},{"name":"webstore"},{"last":true,"name":"windows"}].concat(
          [{"name":"experimental.devtools.audits"},{"name":"experimental.devtools.console"},{"name":"experimental.discovery"},{"name":"experimental.history"},{"name":"experimental.identity"},{"name":"experimental.infobars"},{"name":"experimental.processes"},{"name":"experimental.record"},{"name":"experimental.speechInput"},{"name":"experimental.systemInfo.cpu"},{"last":true,"name":"experimental.systemInfo.storage"}]),
      branchInfo: {"channels":[{"path":"stable","name":"Stable"},{"path":"dev","name":"Dev"},{"path":"beta","name":"Beta"},{"path":"trunk","name":"Trunk"}],"current":"trunk","showWarning":true}
    };
  </script>
  <div id="gc-footer">
    <div class="text">
      <p>
        <!--@Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
        the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
        Attribution 3.0 License</a>, and code samples are licensed under the
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.-->
        该页面翻译自
        <a href="https://developer.chrome.com/extensions/">Google Chrome Extensions</a>
        与
        <a href="https://developer.chrome.com/apps/">Google Chrome Apps</a>。除非特别<a href="https://code.google.com/policies.html#restrictions">说明</a>，该页面的内容遵循
        <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0
        License</a>，代码示例遵循
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>。
      </p>
      <p>
        <!--@©2012 Google-->
      </p>
      <script src="/trunk/static/js/branch.js" type="text/javascript"></script>
      <script src="/trunk/static/js/sidebar.js" type="text/javascript"></script>
      <script src="/trunk/static/js/prettify.js" type="text/javascript"></script>
      <script>
        (function() {
          // Auto syntax highlight all pre tags.
          var preElements = document.getElementsByTagName('pre');
          for (var i = 0; i < preElements.length; i++)
            preElements[i].classList.add('prettyprint');
          prettyPrint();
        })();
      </script>
      <script src="https://www.google-analytics.com/urchin.js" type="text/javascript"></script>
      <script src="https://www.google-analytics.com/ga.js" type="text/javascript"></script>
      <script type="text/javascript">
        // chrome doc tracking
        try {
          var engdocs = _gat._getTracker("YT-10763712-2");
          engdocs._trackPageview();
        } catch(err) {}
        // code.google.com site-wide tracking
        try {
          _uacct="UA-18071-1";
          _uanchor=1;
          _uff=0;
          urchinTracker();
        }
        catch(e) {/* urchinTracker not available. */}
      </script>
      <script>
        (function() {
          var cx = '002967670403910741006:61_cvzfqtno';
          var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
          gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
        })();
      </script>
  
    </div>
  </div>
</html>

