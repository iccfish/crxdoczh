<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="/trunk/static/css/site.css" rel="stylesheet" type="text/css">
    <link href="/trunk/static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="/trunk/static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href="//www.google.com/images/icons/product/chrome-16.png" rel="icon" type="image/ico">
    <title>GCM 服务的 API 参考 - Google Chrome</title>
  </head>
  <body>
    <a id="top"></a>
    <div id="header">
      <span id="logo">
        <a href="http://code.google.com/" id="view-original"><img src="/trunk/static/images/chrome_logo.gif" alt="单击此处查看英文原文"></a>
        <script type="text/javascript">
          document.getElementById('view-original').href = "https://developer.chrome.com" + location.pathname;
        </script>
      </span>
      <span id="cse">
        <gcse:searchbox-only enableAutoComplete="true" autoCompleteMatchTyple="prefix"></gcse:searchbox-only>
      </span>
    </div>
    <a id="gc-topnav-anchor"></a>
    <div id="gc-topnav">
      <h1>Google Chrome 应用（非官方中文版）</h1>
      <ul id="home" class="gc-topnav-tabs">
        <li id="home_link">
          <!--@<a href="index.html" title="Google Chrome 应用 home page"><div>Home</div></a>-->
          <a href="index.html" title="Google Chrome 应用主页"><div>主页</div></a>
        </li>
        <li id="docs_link">
          <!--@<a href="docs.html" title="Official Google Chrome 应用 documentation"><div>Docs</div></a>-->
          <a href="docs.html" title="Google Chrome 应用文档"><div>文档</div></a>
        </li>
        <li id="faq_link">
          <!--@<a href="faq.html" title="Answers to frequently asked questions about Google Chrome 应用"><div>FAQ</div></a>-->
          <a href="faq.html" title="关于 Google Chrome 应用常见问题的答案"><div>常见问题</div></a>
        </li>
        <li id="samples_link">
          <!--@<a href="samples.html" title="Sample 应用 (with source code)"><div>Samples</div></a>-->
          <a href="samples.html" title="示例应用（包含源代码）"><div>示例</div></a>
        </li>
        <li id="group_link">
          <!--<a href="http://groups.google.com/a/chromium.org/group/chromium-extensions" title="Google Chrome 应用 developer forum"><div>Group</div></a>-->
          <a href="http://groups.google.com/a/chromium.org/group/chromium-extensions" title="Google Chrome 应用开发人员论坛"><div>论坛（英文）</div></a>
        </li>
        <li id="so_link">
          <!--<a href="http://stackoverflow.com/questions/tagged/google-chrome-extension" title="[google-chrome-extension] tag on Stack Overflow"><div>Questions?</div></a>-->
          <a href="http://stackoverflow.com/questions/tagged/google-chrome-extension" title="Stack Overflow 上的 [google-chrome-extension] 标签"><div>问题？（英文）</div></a>
        </li>
      </ul>
    </div>
    <div id="gc-container">
      <div id="gc-sidebar">
        <ul 
            class="level1 ">
          <li class="level2">
                <span class="level2">入门</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="about_apps.html" class="level3 ">什么是打包应用？</a>
                </li>
                <li class="level3">
                      <a href="app_architecture.html" class="level3 ">理解架构</a>
                </li>
                <li class="level3">
                      <a href="first_app.html" class="level3 ">创建您的第一个应用</a>
                </li>
              </ul>
          </li>
          <li class="level2">
                <span class="level2">开发</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="develop_apps.html" class="level3 ">在您开始之前</a>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">基础知识</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="app_lifecycle.html" class="level4 ">管理应用的生命周期</a>
                      </li>
                      <li class="level4">
                            <a href="app_storage.html" class="level4 ">Manage Data</a>
                      </li>
                      <li class="level4">
                            <a href="offline_apps.html" class="level4 ">首先考虑离线</a>
                      </li>
                      <li class="level4">
                            <a href="app_external.html" class="level4 ">嵌入内容</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">安全和隐私权</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="app_identity.html" class="level4 ">Identify User</a>
                      </li>
                      <li class="level4">
                            <a href="app_csp.html" class="level4 ">Comply with CSP</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">通知</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                          <a class="button level4">
                            <span class="level4">云消息服务</span>
                            <div class="toggleIndicator level4 toggled"></div>
                          </a>
                          <ul toggleable
                              class="level4 ">
                            <li class="level5">
                                  <a href="cloudMessaging.html" class="level5 ">关于云消息服务</a>
                            </li>
                            <li class="level5">
                                  <a href="pushMessaging.html" class="level5 ">客户端参考</a>
                            </li>
                            <li class="level5">
                                  <a  class="level5 selected">服务参考</a>
                            </li>
                            <li class="level5">
                                  <a href="gcm_tos.html" class="level5 ">服务条款</a>
                            </li>
                          </ul>
                      </li>
                      <li class="level4">
                            <a href="notifications.html" class="level4 ">桌面通知</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">高级技术</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="app_network.html" class="level4 ">网络通信</a>
                      </li>
                      <li class="level4">
                            <a href="app_hardware.html" class="level4 ">访问硬件设备</a>
                      </li>
                    </ul>
                </li>
                <li class="level3">
                    <a class="button level3">
                      <span class="level3">MVC 架构</span>
                      <div class="toggleIndicator level3"></div>
                    </a>
                    <ul toggleable
                        class="level3 hidden">
                      <li class="level4">
                            <a href="app_frameworks.html" class="level4 ">关于 MVC 架构</a>
                      </li>
                      <li class="level4">
                            <a href="angular_framework.html" class="level4 ">用 AngularJS 建立应用</a>
                      </li>
                      <li class="level4">
                            <a href="sencha_framework.html" class="level4 ">用 Sencha Ext JS 建立应用</a>
                      </li>
                    </ul>
                </li>
              </ul>
          </li>
          <li class="level2">
                <span class="level2">部署</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="publish_app.html" class="level3 ">发布</a>
                </li>
              </ul>
          </li>
          <li class="level2">
                <span class="level2">参考</span>
              <ul 
                  class="level2 ">
                <li class="level3">
                      <a href="manifest.html" class="level3 ">清单文件</a>
                </li>
                <li class="level3">
                      <a href="api_index.html" class="level3 ">Chrome 浏览器的 JavaScript API</a>
                </li>
                <li class="level3">
                      <a href="api_other.html" class="level3 ">支持的库</a>
                </li>
                <li class="level3">
                      <a href="app_deprecated.html" class="level3 ">禁用的网页特性</a>
                </li>
              </ul>
          </li>
          <li class="level2">
                <a href="samples.html" class="level2 ">示例</a>
          </li>
          <li class="level2">
                <a href="app_known_issues.html" class="level2 ">Known Issues</a>
          </li>
        </ul>
      </div>
      <div id="gc-pagecontent">
        <h1 class="page_title">GCM 服务的 API 参考</h1>
        <div id="toc">
          <h2><!--@Contents-->目录</h2>
          <ol>
            <li>
              <a href=#libraries>Google APIs 客户端库</a>
            </li>
            <li>
              <a href=#insert>insert 方法</a>
            </li>
            <li>
              <a href=#authorization>认证</a>
              <ol>
                <li><a href=#url>URL</a></li><li><a href=#parameters>必选参数</a></li><li><a href=#response>响应</a></li>
              </ol>
            </li>
            <li>
              <a href=#request>消息请求</a>
              <ol>
                <li><a href=#http>HTTP 请求</a></li><li><a href=#body>请求正文</a></li>
              </ol>
            </li>
          </ol>
        </div>

<meta name="doc-family" content="apps">


<p>
<!--@The <a href="cloudMessaging.html">Google Cloud Messaging for Chrome</a> service
sends messages to users of a Chrome packaged app.
The service handles all aspects of queueing and delivering messages.
To use the service,
you must agree to the
<a href="gcm_tos.html">Google Cloud Messaging for Chrome API Terms of Service</a>.-->
<a href="cloudMessaging.html">用于 Chrome 浏览器的 Google 云消息服务</a>向
Chrome
打包应用的用户发送消息，该服务处理了消息队列以及传递消息的各个方面。要使用这一服务，您必须同意
<a href="gcm_tos.html">Google Cloud Messaging for Chrome API 服务条款</a>。
</p>

<p><!--@Messages must conform to these constraints:-->消息必须遵守这些约束：</p>

<ul>
	<li><strong><!--@Maximum payload length:-->最大内容长度：</strong> 256 <--@bytes-->字节</li>
	<li><strong><!--@Maxium subchannels:--></strong> 4</li>
	<li><strong><!--@Maximum API requests per day:-->每天最大 API 请求数：</strong> 10,000</li>
</ul>

<h2 id="libraries"><!--@Google API client libraries-->Google APIs 客户端库</h2>

<p>
<!--@You may use the REST interface defined here
to access Google Cloud Messaging for Chrome from your application.
We also offer Google API client libraries for a number
of popular programming languages that can be used to access the API.
For more information, see-->
您可以使用这里定义的 REST 接口在您的应用程序中访问 Chrome 浏览器的 Google
云消息服务，我们还为几种可以用来访问该 API 的流行语言提供了 Google API
客户端库。有关更多信息，请参见
<a href="https://developers.google.com/api-client-library">Google APIs <!--@Client Libraries-->客户端库</a><!--@.-->。
</p>

<h2 id="insert"><!--@Insert method-->insert 方法</h2>

<p>
<!--@The--> <code>gcm_for_chrome.messages.insert</code>
<!--@method sends a message to your app or extension user.-->
方法向您的应用程序或扩展程序用户发送消息。
</p>

<h2 id="authorization"><!--@Authentication-->认证</h3>

<p>
<!--@Authentication is required to send messages to users.
<a href="https://developers.google.com/accounts/docs/OAuth2WebServer">Using OAuth 2.0 for Web Server Applications</a>
describes this in greater detail.-->
向用户发送消息之前首先需要认证。<a href="https://developers.google.com/accounts/docs/OAuth2WebServer">在
Web 服务器应用程序中使用 OAuth 2.0</a> 详细描述了这一步。
</p>

<h3 id="url">URL</h3>

<p>
<!--@The URL used to obtain access to the GCM for Chrome service:-->
用来获取对 GCM 服务的访问的 URL 为：
<code>https://accounts.google.com/o/auth2/auth</code>
</p>.

<h3 id="parameters"><!--@Required parameters-->必选参数</h3>
<p>
<!--@The required set of query string parameters are:-->
查询字符串的必选参数为：
</p>

<table>
  <tr>
    <th scope="col"><!--@Parameter-->参数</th>
    <th scope="col"><!--@Description-->描述</th>
  </tr>
  <tr>
    <td><code>client_id</code></td>
    <td><!--@Indicates the app or extension client that is making the request.
    Obtained from the-->
    表示发送请求的应用程序或扩展程序，可以从
    <a href="https://code.google.com/apis/console/">Google APIs <!--@Console-->控制台</a><!--@;
    the parameter value must exactly match the client ID shown
    in the console.-->获取，参数值必须完全匹配控制台中显示的客户端标识符。
    </td>
  </tr>
  <tr>
    <td><code>client_secret</code></td>
    <td><!--@The client secret obtained during registration in-->
    在
    	<a href="https://code.google.com/apis/console/">Google APIs <!--@Console-->控制台</a><!--@.-->注册的过程中获取的客户端密钥。</td>
  </tr>
  <tr>
    <td><code>refresh_token</code></td>
    <td><!--@Token associated with app or extension used to obtain new access token.-->
    与应用或扩展程序相关联的令牌，用于获取新的访问令牌。
    </td>
  </tr>
  <tr>
    <td><code>grant_type</code></td>
    <td><!--@The <code>authorization_code</code> value of <code>refresh_token</code>.-->
    <code>refresh_token</code> 的 <code>authorization_code</code> 值。
    </td>
  </tr>
</table>

<h3 id="response"><!--@Response-->响应</h3>

<p>
<!--@The authorization response includes:-->
认证响应包括：
</p>

<table>
  <tr>
    <th scope="col"><!--@Field-->字段</th>
    <th scope="col"><!--@Description-->描述</th>
  </tr>
  <tr>
    <td><code>access_token</code></td>
    <td><!--@Valid token required to access the GCM for Chrome service.-->
    访问用于 Chrome 浏览器的 GCM 服务所需的有效令牌。
    </td>
  </tr>
  <tr>
    <td><code>expires_in</code></td>
    <td><!--@Time until access token expires in seconds.-->
    访问令牌过期的时间，以秒为单位。
    </td>
  </tr>
  <tr>
    <td><code>token_type</code></td>
    <td><!--@The returned token type, <code>Bearer</code>.-->
    返回的令牌类型：<code>Bearer</code>。
    </td>
  </tr>
</table>

<h2 id="request"><!--@Message request-->消息请求</h2>

<h3 id="http">HTTP <!--@request-->请求</h3>

<p><code>POST https://www.googleapis.com/gcm_for_chrome/v1/messages</code></p>

<h3 id="body"><!--@Request body-->请求正文</h3>

<p>
<!--@In the request body, supply:-->
请在请求正文中提供：
</p>

<table>
  <tr>
    <th scope="col"><!--@Parameter-->参数</th>
    <th scope="col"><!--@Description-->描述</th>
  </tr>
  <tr>
    <td><code>Content-Type</code></td>
    <td><!--@The request body content type, -->
    请求正文的内容类型：
    <code>application/json</code><!--@.-->。</td>
  </tr>
  <tr>
    <td><code>Authorization</code></td>
    <td><code>Bearer</code> HTTP <!--@header including access token, for example,-->
    头信息包含访问令牌，例如：
    <code>Bearer 1/fFBGRNJru1FQd44AzqT3Zg</code><!--@.-->。</td>
  </tr>
  <tr>
    <td><code>channelId</code></td>
    <td><!--@The app or extension channel ID required to push messages back to the app or extension.-->
    应用或扩展程序的通道标识符，用来将消息推送回应用或扩展程序。
    </td>
  </tr>
  <tr>
    <td><code>subchannelId</code></td>
    <td><!--@The subchannel to send the message on; only values 0-3 are valid.-->
    发送消息的子通道，只有 0～3 之间的值才有效。
    </td>
  </tr>
  <tr>
    <td><code>paylooad</code></td>
    <td><!--@The message body (up to 256 bytes).-->
    消息正文（最多 256 字节）。
    </td>
  </tr>
</table>

<p class="backtotop"><a href="#top"><!--@Back to top-->回到顶部</a></p>
      </div>
    </div>
  </body>
  <script>
    window.bootstrap = {
      api_names: [{"name":"alarms"},{"name":"app.runtime"},{"name":"app.window"},{"name":"bluetooth"},{"name":"commands"},{"name":"contextMenus"},{"name":"events"},{"name":"fileSystem"},{"name":"i18n"},{"name":"idle"},{"name":"mediaGalleries"},{"name":"permissions"},{"name":"pushMessaging"},{"name":"runtime"},{"name":"serial"},{"name":"socket"},{"name":"storage"},{"name":"tts"},{"name":"types"},{"name":"usb"},{"last":true,"name":"webstore"}].concat(
          [{"name":"experimental.app"},{"name":"experimental.identity"},{"name":"experimental.mediaGalleries"},{"name":"experimental.record"},{"name":"experimental.systemInfo.cpu"},{"name":"experimental.systemInfo.display"},{"name":"experimental.systemInfo.memory"},{"last":true,"name":"experimental.systemInfo.storage"}]),
      branchInfo: {"channels":[{"path":"stable","name":"Stable"},{"path":"dev","name":"Dev"},{"path":"beta","name":"Beta"},{"path":"trunk","name":"Trunk"}],"current":"trunk","showWarning":false}
    };
  </script>
  <div id="gc-footer">
    <div class="text">
      <p>
        <!--@Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
        the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
        Attribution 3.0 License</a>, and code samples are licensed under the
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.-->
        该页面翻译自
        <a href="https://developer.chrome.com/extensions/">Google Chrome Extensions</a>
        与
        <a href="https://developer.chrome.com/apps/">Google Chrome Apps</a>。除非特别<a href="https://code.google.com/policies.html#restrictions">说明</a>，该页面的内容遵循
        <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0
        License</a>，代码示例遵循
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>。
      </p>
      <p>
        <!--@©2012 Google-->
      </p>
      <script src="/trunk/static/js/branch.js" type="text/javascript"></script>
      <script src="/trunk/static/js/sidebar.js" type="text/javascript"></script>
      <script src="/trunk/static/js/prettify.js" type="text/javascript"></script>
      <script>
        (function() {
          // Auto syntax highlight all pre tags.
          var preElements = document.getElementsByTagName('pre');
          for (var i = 0; i < preElements.length; i++)
            preElements[i].classList.add('prettyprint');
          prettyPrint();
        })();
      </script>
      <script src="https://www.google-analytics.com/urchin.js" type="text/javascript"></script>
      <script src="https://www.google-analytics.com/ga.js" type="text/javascript"></script>
      <script type="text/javascript">
        // chrome doc tracking
        try {
          var engdocs = _gat._getTracker("YT-10763712-2");
          engdocs._trackPageview();
        } catch(err) {}
        // code.google.com site-wide tracking
        try {
          _uacct="UA-18071-1";
          _uanchor=1;
          _uff=0;
          urchinTracker();
        }
        catch(e) {/* urchinTracker not available. */}
      </script>
      <script>
        (function() {
          var cx = '002967670403910741006:61_cvzfqtno';
          var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
          gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
        })();
      </script>
  
    </div>
  </div>
</html>

