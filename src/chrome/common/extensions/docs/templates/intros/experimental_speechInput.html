<p id="classSummary">
<!--@The--> <code>chrome.experimental.speechInput</code> <!--@module provides
one-shot speech recognition to Chrome extensions.
This module is still experimental. For information on how to use experimental
APIs, see the <a href="experimental.html">chrome.experimental.* APIs</a> page.-->
模块向 Chrome 扩展程序提供语音识别。这一模块仍然是实验性的。有关使用实验性
API 的信息，请参见
<a href="experimental.html">chrome.experimental.* API</a>
页面。
</p>

<h2 id="manifest"><!--@Manifest-->清单文件</h2>
<p><!--@You must declare the "experimental" permission in the <a
  href="manifest.html">extension manifest</a> to use the speech input
API.
For example:-->
您必须在<a href="manifest.html">扩展程序的清单文件</a>中声明
"experimental" 权限才能使用语音输入 API。例如：
</p>
<pre>{
  "name": "我的扩展程序",
  ...
  <b>"permissions": [
    "experimental"
  ]</b>,
  ...
}</pre>

<h2 id="howToStart"><!--@How to start speech recognition-->怎样开始语音识别</h2>
<p><!--@To start recognizing speech an extension must call the <code>start()</code>
method. If provided, your callback will be called once recording has
successfully started. In case of error <code>chrome.runtime.lastError</code>
will be set.-->
扩展程序必须调用 <code>start()</code>
方法开始语音识别。如果提供了回调函数，一旦录音成功开始就会调用。如果发生错误，则会设置 $ref:runtime.lastError。
</p>

<p><!--@This API provides exclusive access to the default recording device to the
first extension requesting it. Consequently, any calls to <code>start()</code>
when the device is being used by another extension or web page will fail and set
<code>chrome.runtime.lastError</code>. The message <code>requestDenied</code>
will be set if another extension in the same profile is making use of the API.
Otherwise <code>noRecordingDeviceFound</code>, <code>recordingDeviceInUse</code>
or <code>unableToStart</code> will be set depending on the situation.-->
这一 API
对请求它的第一个扩展程序提供对默认录音设备的独占访问，所以当设备正在由其他扩展程序或网页使用时
<code>start()</code>
的任何调用都会失败，并且会设置
$ref:runtime.lastError。如果同一个用户配置文件中的另一个扩展程序正在使用这一
API，则会将消息设置为
<code>requestDenied</code>（请求拒绝），否则取决于具体情况将设置为
<code>recordingDeviceInUse</code>（录音设备正在使用中）或者
<code>unableToStart</code>（无法开始）。
</p>

<p><!--@To check whether recording is currently active, call the
<code>isRecording()</code> method. Please note that it only checks for audio
recording within Chrome.-->
要检查当前录音是否处于活动状态，请调用
<code>isRecording()</code>
方法。请注意它仅仅检查 Chrome 浏览器内的音频录音。
</p>


<h2 id="howToGetResults"><!--@How to get speech recognition results-->怎样获取语音识别结果</h2>
<p><!--@Listen to the <code>onResult</code> event to receive speech recognition
results.-->
监听 onResult 事件接受语音识别结果。
</p>

<pre>
var callback = function(result) { ... };

chrome.experimental.speechInput.onResult.addListener(callback);
</pre>

<p><!--@The <code>result</code> object contains an array of-->
<code>result</code> 对象包含
$ref:experimental.speechInput.SpeechInputResultHypothesis
<!--@sorted by decreasing likelihood.-->
数组，按照可能性递减的顺序排列。
</p>

<p><!--@Recording automatically stops when results are received. It is safe to call
<code>start()</code> again from the results callback.-->
当结果接收到时录音自动停止，这时可以从结果回调函数中再次调用
<code>start()</code>。
</p>

<p><!--@To handle errors during speech recognition listen for the
<code>onError</code> event.-->
要在语音识别过程中处理错误，请监听
<code>onError</code> 事件。
</p>

<pre>
var callback = function(error) { ... };

chrome.experimental.speechInput.onError.addListener(callback);
</pre>

</p><!--@Recording will automatically stop in case of error.
It is safe to call <code>start()</code> again from the error callback.-->
如果发生了错误录音会自动停止，这时也可以从错误回调函数中再次调用
<code>start()</code>。
</p>


<h2 id="howToStop"><!--@How to stop recording-->怎样停止录音</h2>
<p><!--@To stop speech recognition call the <code>stop()</code> method. If provided,
the callback function will be called once recording has successfully stopped.
In case of error <code>chrome.runtime.lastError</code> will be set.-->
要停止语音识别，请调用
<code>stop()</code>
方法。如果提供了回调函数，一旦录音成功停止就会调用。如果发生错误则会设置
$ref:runtime.lastError。
</p>


<h2 id="otherFeatures"><!--@Other features-->其他功能</h2>
<ul><li>
<code>onSoundStart</code> - <!--@Event generated when start of sound is detected
(from previously being silent).-->开始检测到声音（之前安静）时产生这一事件。
</li><li>
<code>onSoundEnd</code> - <!--@Event generated when end of sound is detected (a
continued period of silence).-->检测到声音停止（持续一段时间的安静）时产生这一事件。
</li></ul>


<h2 id="examples"><!--@Examples-->例子</h2>
<p><!--@The following example illustrates how to show a JavaScript alert with the
most likely recognition result.-->如下例子演示如何通过 JavaScript
消息框显示最有可能的识别结果。</p>
<pre>
function checkStart() {
  if (chrome.runtime.lastError) {
    alert("无法开始语音输入：" + chrome.runtime.lastError.message);
  }
}

function recognitionFailed(error) {
  alert("语音输入失败：" + error.code);
}

function recognitionSucceeded(result) {
  alert("识别到“" + result.hypotheses[0].utterance + "”，可信度为 " + result.hypotheses[0].confidence);
}

chrome.experimental.speechInput.onError.addListener(recognitionFailed);
chrome.experimental.speechInput.onResult.addListener(recognitionSucceeded);
chrome.experimental.speechInput.start({ "language": "en" }, checkStart);
</pre>
